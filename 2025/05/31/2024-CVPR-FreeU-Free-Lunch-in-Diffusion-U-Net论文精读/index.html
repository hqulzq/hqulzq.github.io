<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hqulzq.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="全文翻译摘要在本文中，我们揭示了扩散U-Net中未被充分利用的潜力，它可作为一种“免费午餐”，在不增加计算成本的情况下显著提升生成质量。我们首先研究了U-Net架构在去噪过程中的关键贡献，发现其主骨干主要负责去噪，而跳跃连接主要将高频特征引入解码器模块，导致网络忽略了骨干的语义信息。基于这一发现，我们提出了一种简单而有效的方法——称为“FreeU”，它无需额外的训练或微调即可提高生成质量。我们的核">
<meta property="og:type" content="article">
<meta property="og:title" content="2024-CVPR-FreeU Free Lunch in Diffusion U-Net论文精读">
<meta property="og:url" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/index.html">
<meta property="og:site_name" content="Lzq&#39;s blog">
<meta property="og:description" content="全文翻译摘要在本文中，我们揭示了扩散U-Net中未被充分利用的潜力，它可作为一种“免费午餐”，在不增加计算成本的情况下显著提升生成质量。我们首先研究了U-Net架构在去噪过程中的关键贡献，发现其主骨干主要负责去噪，而跳跃连接主要将高频特征引入解码器模块，导致网络忽略了骨干的语义信息。基于这一发现，我们提出了一种简单而有效的方法——称为“FreeU”，它无需额外的训练或微调即可提高生成质量。我们的核">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f2.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f3.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f1.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f4.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f5.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f6.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f7.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f8.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f9.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f10.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/t1.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f11.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/t2.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f12.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f13.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f14.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f15.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f16.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f17.png">
<meta property="og:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f18.png">
<meta property="article:published_time" content="2025-05-31T02:43:02.000Z">
<meta property="article:modified_time" content="2025-05-31T08:33:30.000Z">
<meta property="article:author" content="Zongqing Li">
<meta property="article:tag" content="diffusion">
<meta property="article:tag" content="CVPR">
<meta property="article:tag" content="2024">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/f2.png">

<link rel="canonical" href="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>2024-CVPR-FreeU Free Lunch in Diffusion U-Net论文精读 | Lzq's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Lzq's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">46</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">83</span></a>

  </li>
        <li class="menu-item menu-item-book">

    <a href="/book" rel="section"><i class="fas fa-book fa-fw"></i>Book</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hqulzq.github.io/2025/05/31/2024-CVPR-FreeU-Free-Lunch-in-Diffusion-U-Net%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://github.com/hqulzq/hqulzq.github.io/blob/main/images/userimg.jpg?raw=true">
      <meta itemprop="name" content="Zongqing Li">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lzq's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2024-CVPR-FreeU Free Lunch in Diffusion U-Net论文精读
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-31 10:43:02 / 修改时间：16:33:30" itemprop="dateCreated datePublished" datetime="2025-05-31T10:43:02+08:00">2025-05-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="全文翻译"><a href="#全文翻译" class="headerlink" title="全文翻译"></a>全文翻译</h2><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>在本文中，我们揭示了扩散U-Net中未被充分利用的潜力，它可作为一种“免费午餐”，在不增加计算成本的情况下显著提升生成质量。<font style="color: red;background: yellow"><strong>我们首先研究了U-Net架构在去噪过程中的关键贡献，发现其主骨干主要负责去噪，而跳跃连接主要将高频特征引入解码器模块，导致网络忽略了骨干的语义信息。基于这一发现，我们提出了一种简单而有效的方法——称为“FreeU”，它无需额外的训练或微调即可提高生成质量。我们的核心见解是策略性地重新加权来自U-Net跳跃连接和骨干特征图的贡献，以利用U-Net架构两个组件的优势。</strong></font>在图像和视频生成任务上的实验结果表明，我们的FreeU可以轻松集成到现有的扩散模型中，例如Stable Diffusion、DreamBooth、ModelScope、Rerender和ReVersion，只需几行代码即可提高生成质量。你所需要做的就是在推理过程中调整两个缩放因子。项目页面：<a target="_blank" rel="noopener" href="https://chenyangsi.top/FreeU/">https://chenyangsi.top/FreeU/</a><br><span id="more"></span></p>
<h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>扩散概率模型作为生成模型的一个前沿类别，已成为研究领域的焦点，尤其是在计算机视觉相关任务中 [5,6,8,10,12,20,22,26,28,29,32]。与变分自编码器（VAE）[21]、生成对抗网络（GANs）[3,9,16-19,25] 和向量量化方法 [7,34] 等其他类别的生成模型不同，扩散模型引入了一种新颖的生成范式。这些模型采用固定的马尔可夫链来映射潜在空间，促进捕获数据集中潜在结构复杂性的复杂映射。最近，其令人印象深刻的生成能力（从细节的高水平到生成示例的多样性）推动了各种计算机视觉应用的突破性进展，如图像合成 [12,29,32]、图像编辑 [1,4,14,24]、图像到图像翻译 [4,31,36] 和文本到视频生成 [2,11,13,23,33,37,38,40]。</p>
<p>扩散模型由扩散过程和去噪过程组成。在扩散过程中，高斯噪声逐渐添加到输入数据中，最终将其破坏为近似纯高斯噪声。在去噪过程中，通过学习的逆扩散操作序列从噪声状态恢复原始输入数据。通常，U-Net 被训练用于在每个去噪步骤迭代预测要去除的噪声。现有工作专注于利用预训练的扩散 U-Net 进行下游应用，而扩散 U-Net 的内部特性在很大程度上仍未被探索。</p>
<p>除了扩散模型的应用之外，在本文中，我们对研究扩散 U-Net 在去噪过程中的有效性感兴趣。<strong>为了更好地理解去噪过程，我们首先提出了一种向傅里叶域的范式转变，以透视扩散模型的生成过程，这是一个此前研究有限的领域。</strong>如图2 所示，最上面一行展示了逐步去噪过程，呈现了连续迭代中生成的图像。接下来的两行展示了逆傅里叶变换后与每个步骤对应的低频和高频空间域信息。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f2.png" width="70%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图2. 去噪过程。顶行展示了图像在迭代过程中的渐进去噪过程，接下来的两行展示了逆傅里叶变换后与每个步骤匹配的低频和高频分量。显然，低频分量变化缓慢，而高频分量在去噪过程中表现出更显著的变化。</em></td>
</tr>
</tbody>
</table>
</div>
<p>从图2 中可以明显看出，<strong>低频分量逐渐调制，变化速率较缓，而高频分量在去噪过程中表现出更显著的动态变化。</strong>这些发现在图3 中得到了进一步证实。这可以直观地解释为：</p>
<ul>
<li>1）低频分量本质上体现了图像的全局结构和特征，包括全局布局和平滑的颜色。这些分量封装了构成图像本质和表示的基础全局元素。在去噪过程中，其快速变化通常是不合理的。这些分量的剧烈变化可能会从根本上重塑图像的本质，这通常与去噪过程的目标不相容。</li>
<li>2）相反，高频分量包含图像中的快速变化，例如边缘和纹理。这些更精细的细节对噪声明显敏感，当噪声引入图像时，通常表现为随机高频信息。因此，去噪过程需要在去除噪声的同时保留不可或缺的复杂细节。</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f3.png" width="50%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图3. 随着骨干缩放因子b的变化，傅里叶相对对数振幅的变化。b的增加相应地导致扩散模型生成的图像中的高频分量受到抑制。</em></td>
</tr>
</tbody>
</table>
</div>
<p>鉴于去噪过程中低频和高频分量之间的这些观察结果，我们扩展了研究，以确定扩散框架内 U-Net 架构的具体贡献。在 U-Net 解码器的每个阶段，来自跳跃连接的跳跃特征和骨干特征被连接在一起。<strong>我们的研究表明，U-Net 的主骨干主要对去噪做出贡献。相反，观察到跳跃连接将高频特征引入解码器模块。这些连接传播细粒度的语义信息，使其更容易恢复输入数据。然而，这种传播的一个意想不到的后果是，在推理阶段可能会削弱骨干固有的去噪能力。这可能导致生成异常的图像细节，如图1 的第一行所示。</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f1.png" width="80%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图1. 我们提出了FreeU，这是一种无需任何成本即可显著提高扩散模型样本质量的方法：无需训练，无需引入额外参数，也不会增加内存或采样时间。</em></td>
</tr>
</tbody>
</table>
</div>
<p>基于这一发现，我们提出了一种新的策略，称为 “FreeU”，<strong>它有潜力在不需要额外训练或微调的计算开销的情况下提高样本质量。在推理阶段，我们实例化了两个专门的调制因子，旨在平衡来自 U-Net 架构主骨干和跳跃连接的特征贡献。第一个称为骨干特征因子，旨在放大主骨干的特征图，从而增强去噪过程。然而，我们发现虽然包含骨干特征缩放因子会产生显著的改进，但有时会导致不理想的纹理过度平滑。为了缓解这个问题，我们引入了第二个因子，跳跃特征缩放因子，旨在减轻纹理过度平滑的问题。</strong></p>
<p>我们的 FreeU 框架在与现有扩散模型集成时表现出无缝的适应性，包括文本到图像生成和文本到视频生成等应用。我们对我们的方法进行了全面的实验评估，采用 Stable Diffusion [29]、DreamBooth [30]、ReVersion [15]、ModelScope [23] 和 Rerender [39] 作为我们的基准比较基础模型。通过在推理阶段采用 FreeU，这些模型表明生成输出的质量有明显的提高。图1 中的可视化证实了 FreeU 在显著增强生成图像中的复杂细节和整体视觉保真度方面的有效性。我们的贡献总结如下：</p>
<ul>
<li>我们研究并揭示了扩散模型中 U-Net 架构用于去噪的潜力，并确定其主骨干主要对去噪做出贡献，而其跳跃连接将高频特征引入解码器模块。</li>
<li>我们进一步引入了一种简单而有效的方法，称为 “FreeU”，它通过利用 U-Net 架构两个组件的优势来增强 U-Net 的去噪能力。它在不需要额外训练或微调的情况下显著提高了生成质量。<br>所提出的 FreeU 框架是通用的，可以无缝集成到现有的扩散模型中。我们展示了在各种基于扩散的方法中样本质量的显著提高，表明 FreeU 在没有额外成本的情况下是有效的。</li>
</ul>
<h3 id="2-方法"><a href="#2-方法" class="headerlink" title="2. 方法"></a>2. 方法</h3><h4 id="2-1-预备知识"><a href="#2-1-预备知识" class="headerlink" title="2.1 预备知识"></a>2.1 预备知识</h4><p>扩散模型（如去噪扩散概率模型DDPM[12]）包含用于数据建模的两个基本过程：扩散过程和去噪过程。扩散过程由T个步骤组成。在每个步骤t，高斯噪声通过马尔可夫链按预定的方差调度参数$\beta_{1},…,\beta_{T}$逐步引入数据分布$x_{0} ~ q(x_{0})$中：</p>
<script type="math/tex; mode=display">q\left(x_{t} | x_{t-1}\right)=\mathcal{N}\left(x_{t} ; \sqrt{1-\beta_{t}} x_{t-1}, \beta_{t} \mathcal{I}\right) \tag{1}</script><p>去噪过程将上述扩散过程逆向，根据含噪输入$x_{t}$还原为底层的干净数据$x_{t-1}$：</p>
<script type="math/tex; mode=display">p_{\theta}\left(x_{t-1} | x_{t}\right)=\mathcal{N}\left(x_{t-1} ; \mu_{\theta}\left(x_{t}, t\right), \sum_{\theta}\left(x_{t}, t\right)\right)\tag{2}</script><p>其中$\mu_{\theta}$和$\sum_{\theta}$通过包含去噪模型$\epsilon_{\theta}$的估计过程确定。通常，该去噪模型采用时间条件U-Net架构实现，其训练目标是消除数据样本中的噪声，同时提升生成样本的整体保真度。</p>
<h4 id="2-2-扩散U-Net如何执行去噪？"><a href="#2-2-扩散U-Net如何执行去噪？" class="headerlink" title="2.2 扩散U-Net如何执行去噪？"></a>2.2 扩散U-Net如何执行去噪？</h4><p>基于图2和图3所示去噪过程中低频与高频分量的显著差异，我们扩展研究以描绘U-Net架构在去噪过程中的具体贡献，探索去噪网络的内部特性。如图4所示，U-Net架构包含主骨干网络（包括编码器和解码器）以及促进编码器与解码器对应层间信息传递的跳跃连接。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f4.png" width="80%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图4. FreeU框架。(a) U-Net跳跃特征和骨干特征。在U-Net中，跳跃特征和骨干特征在每个解码阶段被连接在一起。我们在连接过程中应用FreeU操作。(b) FreeU操作。因子b旨在放大骨干特征图x，而因子s旨在衰减跳跃特征图h。</em></td>
</tr>
</tbody>
</table>
</div>
<p><strong>U-Net的骨干网络</strong>：为评估骨干和横向跳跃连接在去噪过程中的显著特征，我们进行了一项对照实验——在特征图拼接前引入两个乘法缩放因子$b$和$s$，分别调制骨干和跳跃连接生成的特征图。如图5所示，提升骨干缩放因子$b$可显著提升生成图像质量，而调制横向跳跃连接的缩放因子$s$的变化对生成图像质量的影响可忽略不计。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f5.png" width="80%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图5. 骨干和跳跃连接缩放因子(b和s)的影响。增加骨干缩放因子b显著提高了图像质量，而跳跃缩放因子s的变化对图像合成质量的影响可以忽略不计。</em></td>
</tr>
</tbody>
</table>
</div>
<p>基于这些观察，我们进一步探究了当骨干特征图缩放因子$b$增大时图像生成质量提升的潜在机制。分析表明，这种质量提升根本上与U-Net架构骨干增强的去噪能力相关。如图6所示，$b$的相应增加会导致扩散模型生成图像中的高频分量受到抑制。这意味着增强骨干特征可有效提升U-Net架构的去噪能力，从而在保真度和细节保留方面贡献更优的输出。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f6.png" width="50%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图6. 随着骨干缩放因子b的变化，傅里叶相对对数振幅的变化。b的增加相应地导致扩散模型生成的图像中的高频分量受到抑制。</em></td>
</tr>
</tbody>
</table>
</div>
<p><strong>U-Net的跳跃连接</strong>：相反，跳跃连接用于将编码器块早期层的特征直接转发至解码器。有趣的是，如图7所示，这些特征主要由高频信息构成。基于此观察，我们推测在U-Net架构的训练过程中，这些高频特征的存在可能会在解码器模块中无意地加速向噪声预测的收敛。此外，图5中调制跳跃特征的有限影响也表明跳跃特征主要对解码器的信息起作用。反过来，这种现象可能导致推理过程中骨干固有去噪能力的意外减弱。因此，这一观察引发了关于骨干和跳跃连接在U-Net框架的复合去噪性能中所起的平衡作用的相关问题。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f7.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图7. 骨干、跳跃及其融合特征图的傅里叶相对对数振幅。由编码器块的早期层直接转发到解码器的跳跃连接所传递的特征包含大量高频信息。</em></td>
</tr>
</tbody>
</table>
</div>
<h4 id="2-3-扩散U-Net中的免费午餐"><a href="#2-3-扩散U-Net中的免费午餐" class="headerlink" title="2.3 扩散U-Net中的免费午餐"></a>2.3 扩散U-Net中的免费午餐</h4><p>利用上述发现，我们提出了简单而有效的方法“FreeU”，它通过利用U-Net架构两个组件的优势，有效增强了U-Net架构的去噪能力。它在不需要额外训练或微调的情况下，显著提高了生成质量。</p>
<p>从技术上讲，对于U-Net解码器的第$l$个块，设$x_{l}$表示来自前一个块主骨干的骨干特征图，$h_{l}$表示通过相应跳跃连接传播的特征图。为调制这些特征图，我们引入两个标量因子：用于$x_{l}$的骨干特征缩放因子$b_{l}$和用于$h_{l}$的跳跃特征缩放因子$s_{l}$。具体而言，因子$b_{l}$旨在放大骨干特征图$x_{l}$，而因子$s_{l}$旨在衰减跳跃特征图$h_{l}$。</p>
<p>对于骨干特征，我们引入了一种称为结构相关缩放的新方法，该方法为每个样本动态调整骨干特征的缩放。不同于对所有样本或同一通道内的所有位置应用统一固定缩放因子的方法，我们的方法基于样本特征的特定特性自适应调整缩放因子。我们首先沿通道维度计算平均特征图：</p>
<script type="math/tex; mode=display">\overline{x}_{l}=\frac{1}{C} \sum_{i=1}^{C} x_{l, i} \tag{3}</script><p>其中$x_{l,i}$表示特征图$x_{l}$的第$i$个通道，$C$表示$x_{l}$中的总通道数。随后，骨干因子图确定如下：</p>
<script type="math/tex; mode=display">\alpha_{l}=\left(b_{l}-1\right) \cdot \frac{\overline{x}_{l}-Min\left(\overline{x}_{l}\right)}{Max\left(\overline{x}_{l}\right)-Min\left(\overline{x}_{l}\right)}+1 \tag{4}</script><p>其中$\alpha_{l}$表示骨干因子图，$b_{l}$是标量常数。然后，通过实验研究我们发现，通过与$\alpha_{l}$相乘来不加区分地放大$x_{l}$的所有通道，会导致合成图像中的纹理过度平滑。原因是增强的U-Net在去噪时损害了图像的高频细节。因此，我们将缩放操作限制在$x_{l}$的一半通道，如下所示：</p>
<script type="math/tex; mode=display">x_{l, i}'= \begin{cases}x_{l, i} \odot \alpha_{l}, & \text { if } i<C / 2 \\ x_{l, i}, & \text { otherwise }\end{cases}\tag {5}</script><p>事实上，如图8所示，平均特征图$\overline{x}_{l}$本身包含有价值的结构信息。因此，骨干因子图$\alpha_{l}$有助于以与其结构特征一致的方式放大骨干特征图$x_{l}$。这种策略性方法有助于缓解过度平滑的问题。重要的是，该策略提供了双重好处。首先，它增强了骨干特征图的去噪能力，使其能够更有效地过滤噪声。其次，它避免了在整个特征图上不加区分地应用缩放带来的不利影响，从而在降噪和纹理保留之间实现更细致的平衡。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f8.png" width="70%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图8. 解码器第二阶段平均特征图的可视化。</em></td>
</tr>
</tbody>
</table>
</div>
<p>为了进一步缓解由于增强去噪而导致的纹理过度平滑问题，我们还在傅里叶域中采用频谱调制，有选择地减少跳跃特征的低频分量。数学上，此操作如下所示：</p>
<script type="math/tex; mode=display">\mathcal{F}\left(h_{l, i}\right)=FFT\left(h_{l, i}\right) \tag{6}</script><script type="math/tex; mode=display">\mathcal{F}'\left(h_{l, i}\right)=\mathcal{F}\left(h_{l, i}\right) \odot \beta_{l, i} \tag{7}</script><script type="math/tex; mode=display">h_{l, i}'=IFFT\left(\mathcal{F}'\left(h_{l, i}\right)\right) \tag{8}</script><p>其中$FFT(·)$和$IFFT(·)$是傅里叶变换和逆傅里叶变换，$\odot$表示元素级乘法，$\beta_{l,i}$是傅里叶掩码，设计为傅里叶系数大小的函数，用于实现与频率相关的缩放因子$s_{l}$：</p>
<script type="math/tex; mode=display">\beta_{l, i}(r)= \begin{cases}s_{l} & \text { if } r<r_{\text {thresh }}, \\ 1 & \text { otherwise. }\end{cases} \tag{9}</script><p>其中$r$是半径，$r_{\text{thresh}}$是阈值频率。然后，增强的跳跃特征图$h’$与修改后的骨干特征图$x’_{l}$连接，用于U-Net架构中的后续层，如图4所示。</p>
<p>值得注意的是，所提出的FreeU框架不需要任何特定于任务的训练或微调。添加骨干和跳跃缩放因子可以轻松地用几行代码完成。本质上，架构的参数可以在推理阶段自适应地重新加权，这允许更灵活和强大的去噪操作，而不会增加任何计算负担。这使得FreeU成为一种高度实用的解决方案，可以无缝集成到现有的扩散模型中以提高其性能。</p>
<h3 id="3-实验"><a href="#3-实验" class="headerlink" title="3. 实验"></a>3. 实验</h3><h4 id="3-1-实现细节"><a href="#3-1-实现细节" class="headerlink" title="3.1 实现细节"></a>3.1 实现细节</h4><p>为评估所提出的FreeU的有效性，我们系统地开展了一系列实验，将我们的基准与Stable Diffusion[29]、DreamBooth[30]、ModelScope[23]和Rerender[39]等最先进的方法进行对比。重要的是，我们的方法可无缝集成到这些成熟方法中，无需因额外训练或微调而产生任何额外的计算开销。我们严格遵循这些方法的既定设置，仅在推理过程中引入骨干特征因子和跳跃特征因子。</p>
<h4 id="3-2-文本到图像"><a href="#3-2-文本到图像" class="headerlink" title="3.2 文本到图像"></a>3.2 文本到图像</h4><p>Stable Diffusion[29]是一种潜在文本到图像扩散模型，以其基于文本输入生成逼真图像的能力而闻名。它在各种图像合成任务中始终展现出卓越性能。随着我们将FreeU增强集成到Stable Diffusion中，结果（如图9所示）显示该模型的生成能力有了显著提升。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f9.png" width="70%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图9. Stable Diffusion[29]使用或不使用FreeU生成的样本。</em></td>
</tr>
</tbody>
</table>
</div>
<p>详细而言，将FreeU融入Stable Diffusion[29]后，在实体刻画和细粒度细节方面均取得了改进。例如，当提供提示词“a blue car is being filmed”（一辆蓝色汽车正在被拍摄）时，FreeU对图像进行了优化，消除了车顶的不规则之处，并增强了周围建筑的纹理细节。在“Mother rabbit is raising baby rabbits”（兔妈妈正在养育兔宝宝）的案例中，FreeU确保生成的图像描绘出一只外观正常的兔妈妈照顾兔宝宝的场景。此外，在诸如“a attacks an upset cat and is then chased off”（一个物体攻击了一只生气的猫，然后被赶走）和“A teddy bear walking in the snowstorm”（一只泰迪熊在暴风雪中行走）的场景中，FreeU帮助生成了姿势更逼真的猫和泰迪熊。令人印象深刻的是，针对复杂的提示词“A cat riding a motorcycle”（一只猫骑着摩托车），FreeU不仅准确渲染了各个实体，还巧妙捕捉了它们之间的细微关系，确保猫呈现出正在骑行的动态状态。在图10中，我们展示了基于SDXL框架[27]生成的图像。可以明显看出，我们提出的FreeU在生成逼真图像方面始终表现出色，尤其是在细节生成方面。这些令人信服的结果证明了FreeU与SD[29]或SDXL[27]框架结合所带来的实质性质量提升。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f10.png" width="70%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图10. Stable Diffusion-XL[27]使用或不使用FreeU生成的样本。</em></td>
</tr>
</tbody>
</table>
</div>
<p><strong>定量评估</strong>：我们邀请了35名参与者进行研究，以评估图像质量和图文对齐度。每位参与者会收到一个文本提示词和两张对应的合成图像，一张来自SD，另一张来自SD+FreeU。为确保公平性，我们使用相同的随机采样种子生成两张图像。图像顺序是随机的，以消除任何偏见。然后，参与者分别选择他们认为在图文对齐和图像质量方面更优的图像。我们在表1中列出了每个类别中SD和SD+FreeU的得票率。我们的分析表明，大多数投票都支持SD+FreeU，这表明FreeU在两个评估方面都显著增强了Stable Diffusion文本到图像模型。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="t1.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>表 1. 文本到图像的定量结果。我们分别计算了基线和我们方法的得票百分比。Image-Text 指的是图文对齐。</em></td>
</tr>
</tbody>
</table>
</div>
<h4 id="3-3-文本到视频"><a href="#3-3-文本到视频" class="headerlink" title="3.3 文本到视频"></a>3.3 文本到视频</h4><p>ModelScope[23]作为一种先进的文本到视频扩散模型，在从文本描述生成视频方面处于前沿地位。将我们的FreeU增强融入ModelScope[23]后，进一步提升了其视频合成能力，如图11所示。例如，当呈现提示词“A cinematic view of the ocean, from a cave”（从洞穴中拍摄的海洋的电影视角）时，FreeU使ModelScope[23]能够生成“从洞穴中”的视角，丰富了视觉叙事。在“A cartoon of an elephant walking”（一头大象行走的卡通）的案例中，ModelScope[23]最初生成了一头有两个鼻子的大象，但随着FreeU的加入，它纠正了这一异常，生成了一头运动中的正确大象形象。此外，针对提示词“An astronaut flying in space”（一名在太空中飞行的宇航员），在FreeU的协助下，ModelScope[23]能够生成宇航员在广阔太空中漂浮的清晰生动的画面。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f11.png" width="70%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图11. ModelScope[23]使用或不使用FreeU生成的样本。</em></td>
</tr>
</tbody>
</table>
</div>
<p>这些结果强调了通过将FreeU与ModelScope[23]协同应用所实现的显著改进，从而生成具有清晰运动、丰富细节和语义对齐的高质量内容。</p>
<p><strong>定量评估</strong>：我们以与文本到图像类似的方式对FreeU在文本到视频任务上进行了定量评估。表2中显示的结果表明，大多数参与者更喜欢使用FreeU生成的视频。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="t2.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>表 2. 文本到视频的定量结果。我们分别计算了基线和我们方法的得票百分比。Video-Text 指的是视频文本对齐。</em></td>
</tr>
</tbody>
</table>
</div>
<h4 id="3-4-下游任务"><a href="#3-4-下游任务" class="headerlink" title="3.4 下游任务"></a>3.4 下游任务</h4><p>FreeU在各种扩散模型应用中显著提高了合成样本的质量。我们的评估从基础的图像和视频合成模型扩展到了更专业的下游应用。</p>
<p>我们将FreeU融入DreamBooth[30]，这是一种专门用于个性化文本到图像任务的扩散模型。改进是显而易见的，如图12所示，“cat <R> motorbike”（猫&lt;关系&gt;摩托车）的合成图像在真实感方面有了显著提升。例如，当提示词为“a photo of action figure riding a motorcycle”（一个动作人偶骑着摩托车的照片）时，基础DreamBooth[30]模型难以合成人偶腿部的外观，而FreeU增强版本巧妙地克服了这一障碍。同样，对于提示词“A toy on a beach”（海滩上的一个玩具），初始输出存在身体形状异常。FreeU的集成改善了这些缺陷，提供了更准确的表示并提高了色彩保真度。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f12.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图12. DreamBooth[30]使用或不使用FreeU生成的样本。</em></td>
</tr>
</tbody>
</table>
</div>
<p>我们还将FreeU集成到ReVersion[15]中，这是一种基于Stable Diffusion的关系反转方法，如图13所示，其质量得到了提升。例如，当要表达两个孩子之间“back to back”（背靠背）的关系时，FreeU增强了ReVersion准确表示这种关系的能力。对于“inside”（内部）关系，当一只狗应该被放置在篮子内部时，ReVersion有时会生成带有伪影的狗，而引入FreeU有助于消除这些伪影。虽然ReVersion有效地捕捉了关系概念，但由于U-Net跳跃特征中过多的高频噪声，Stable Diffusion有时可能难以合成关系概念。添加FreeU允许使用ReVersion学习的完全相同的关系提示词来获得更好的实体和关系合成质量。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f13.png" width="70%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图13. ReVersion[15]使用或不使用FreeU生成的样本。</em></td>
</tr>
</tbody>
</table>
</div>
<p>此外，我们评估了FreeU对Rerender[39]的影响，这是一种专为零样本文本引导视频到视频翻译设计的扩散模型。图14描绘了结果：合成视频的细节和真实感有了明显改善。例如，当提供提示词“A dog wearing sunglasses”（一只戴太阳镜的狗）和输入视频时，Rerender[39]最初生成的狗视频带有与“太阳镜”相关的伪影。然而，FreeU的加入成功消除了此类伪影，产生了精炼的输出。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f14.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图14. Rerender[39]使用或不使用FreeU生成的样本。</em></td>
</tr>
</tbody>
</table>
</div>
<p>总之，这些结果证实，FreeU的融入在使用完全相同的学习提示词的情况下，提高了实体表示和合成质量。</p>
<h4 id="3-5-消融研究"><a href="#3-5-消融研究" class="headerlink" title="3.5 消融研究"></a>3.5 消融研究</h4><p><strong>FreeU的效果</strong>：引入FreeU的主要目的是增强扩散模型中U-Net架构的去噪能力。为评估FreeU的影响，我们使用Stable Diffusion[29]作为基础框架进行了分析实验。在图15中，我们展示了Stable Diffusion[29]在有和没有融入FreeU的情况下，其傅里叶变换的相对对数振幅的可视化。<strong>这些可视化表明，FreeU在去噪过程的每个步骤中都对减少高频信息产生了明显影响，这表明FreeU能够有效去噪。</strong>此外，我们通过可视化U-Net架构的特征图扩展了分析。如图16所示，我们观察到FreeU生成的特征图包含更明显的结构信息。这一观察结果与FreeU的预期效果一致，即它在有效去除噪声的同时保留复杂细节，与模型的去噪目标相协调。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f15.png" width="80%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图15. 在去噪过程中，使用或不使用FreeU的Stable Diffusion[29]的傅里叶相对对数振幅。</em></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f16.png" width="80%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图16. 使用或不使用FreeU的Stable Diffusion[29]的特征图可视化。</em></td>
</tr>
</tbody>
</table>
</div>
<p><strong>FreeU中组件的效果</strong>：我们评估了所提出的FreeU策略的效果，即引入骨干特征缩放因子和跳跃特征缩放因子，以精细平衡来自U-Net架构主骨干和跳跃连接的特征贡献。在图17中，我们展示了评估结果。在推理过程中融入骨干缩放因子的SD+FreeU(b)情况下，与单独的SD[29]相比，我们观察到在生成生动细节方面有了明显改善。例如，当给定提示词“A fat rabbit wearing a purple robe walking through a fantasy landscape”（一只穿着紫色长袍的胖兔子走过一个奇幻景观）时，SD+FreeU(b)生成了一只具有正常手臂和耳朵的更逼真的兔子，而SD[29]则不然。然而，必须注意的是，尽管特征缩放因子的加入产生了显著改进，但有时会导致不理想的纹理过度平滑。为缓解这个问题，我们引入了跳跃特征缩放因子，旨在减少低频信息并减轻纹理过度平滑的问题。如图17所示，在SD+FreeU(b&amp;s)中同时使用骨干和跳跃特征缩放因子导致生成了更逼真的图像。例如，在提示词“A synthwave style sunset above the reflecting water of the sea, digital art”（海面上反射着合成波风格的日落，数字艺术）中，SD+FreeU(b&amp;s)中生成的日落天空与SD+FreeU(b)相比，真实感有所增强。这凸显了全面的FreeU策略在平衡特征和缓解与纹理平滑相关问题方面的有效性，最终实现了更忠实和逼真的图像生成。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f17.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图17. 骨干缩放因子和跳跃缩放因子的消融研究。</em></td>
</tr>
</tbody>
</table>
</div>
<p><strong>骨干结构相关因子的效果</strong>：我们评估了所提出的骨干缩放策略（结构相关缩放）在降噪和纹理保留之间的微妙平衡上的效果。如图18所示，与SD[29]生成的结果相比，当FreeU使用恒定缩放因子时，生成的图像质量有了显著提升。然而，需要强调的是，使用固定缩放因子会产生不利后果，表现为明显的纹理过度平滑和不期望的颜色过饱和。相反，具有结构相关缩放因子图的FreeU采用自适应缩放方法，利用结构信息来指导骨干因子图的分配。我们的观察表明，具有结构相关缩放因子图的FreeU有效缓解了这些问题，并在生成生动和复杂的细节方面取得了显著改进。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><img src="f18.png" width="60%" ></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>图18. 骨干缩放因子的消融研究。(a) SD生成的图像。(b) 使用恒定因子的FreeU生成的图像。(c) 使用结构相关缩放因子图的FreeU生成的图像。</em></td>
</tr>
</tbody>
</table>
</div>
<h3 id="4-结论"><a href="#4-结论" class="headerlink" title="4. 结论"></a>4. 结论</h3><p>在本研究中，我们引入了一种极为简单却高效的方法——FreeU，它能够在不增加任何计算成本的情况下，显著提升扩散模型的样本生成质量。受U-Net架构中跳跃连接和骨干特征所发挥的基础作用启发，我们深入分析了它们在扩散U-Net中的影响。<strong>研究发现，主骨干主要负责去噪，而跳跃连接则主要将高频特征引入解码器，这可能导致模型忽略骨干中关键的语义信息。为解决这一问题，我们对U-Net跳跃连接和骨干特征图的贡献进行了策略性重新加权。这种重新加权充分利用了U-Net两个组件的独特优势，使得在各种文本提示和随机种子下，样本质量都得到了显著提升。</strong>我们提出的FreeU可以无缝集成到各种扩散基础模型及其下游任务中，为提升样本质量提供了一种通用方法。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/diffusion/" rel="tag"># diffusion</a>
              <a href="/tags/CVPR/" rel="tag"># CVPR</a>
              <a href="/tags/2024/" rel="tag"># 2024</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/05/30/2024-NeurIPS-Simple-and-Fast-Distillation-of-Diffusion-Models%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/" rel="prev" title="2024-NeurIPS-Simple and Fast Distillation of Diffusion Models论文精读">
      <i class="fa fa-chevron-left"></i> 2024-NeurIPS-Simple and Fast Distillation of Diffusion Models论文精读
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/06/03/2024-ICLR-Consistency-Trajectory-Models-Learning-Probability-Flow-ODE-Trajectory-of-Diffusion%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/" rel="next" title="2024-ICLR-Consistency Trajectory Models Learning Probability Flow ODE Trajectory of Diffusion论文精读">
      2024-ICLR-Consistency Trajectory Models Learning Probability Flow ODE Trajectory of Diffusion论文精读 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E6%96%87%E7%BF%BB%E8%AF%91"><span class="nav-number">1.</span> <span class="nav-text">全文翻译</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%91%98%E8%A6%81"><span class="nav-number">1.1.</span> <span class="nav-text">摘要</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">1.2.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%96%B9%E6%B3%95"><span class="nav-number">1.3.</span> <span class="nav-text">2. 方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86"><span class="nav-number">1.3.1.</span> <span class="nav-text">2.1 预备知识</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E6%89%A9%E6%95%A3U-Net%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E5%8E%BB%E5%99%AA%EF%BC%9F"><span class="nav-number">1.3.2.</span> <span class="nav-text">2.2 扩散U-Net如何执行去噪？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-%E6%89%A9%E6%95%A3U-Net%E4%B8%AD%E7%9A%84%E5%85%8D%E8%B4%B9%E5%8D%88%E9%A4%90"><span class="nav-number">1.3.3.</span> <span class="nav-text">2.3 扩散U-Net中的免费午餐</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%9E%E9%AA%8C"><span class="nav-number">1.4.</span> <span class="nav-text">3. 实验</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82"><span class="nav-number">1.4.1.</span> <span class="nav-text">3.1 实现细节</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-%E6%96%87%E6%9C%AC%E5%88%B0%E5%9B%BE%E5%83%8F"><span class="nav-number">1.4.2.</span> <span class="nav-text">3.2 文本到图像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-%E6%96%87%E6%9C%AC%E5%88%B0%E8%A7%86%E9%A2%91"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.3 文本到视频</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-%E4%B8%8B%E6%B8%B8%E4%BB%BB%E5%8A%A1"><span class="nav-number">1.4.4.</span> <span class="nav-text">3.4 下游任务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-%E6%B6%88%E8%9E%8D%E7%A0%94%E7%A9%B6"><span class="nav-number">1.4.5.</span> <span class="nav-text">3.5 消融研究</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%BB%93%E8%AE%BA"><span class="nav-number">1.5.</span> <span class="nav-text">4. 结论</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zongqing Li"
      src="https://github.com/hqulzq/hqulzq.github.io/blob/main/images/userimg.jpg?raw=true">
  <p class="site-author-name" itemprop="name">Zongqing Li</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hqulzq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hqulzq" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hqulzq@163.com" title="E-Mail → mailto:hqulzq@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

      
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2019/" rel="tag">2019</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2020/" rel="tag">2020</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2021/" rel="tag">2021</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2022/" rel="tag">2022</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2023/" rel="tag">2023</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2024/" rel="tag">2024</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2025/" rel="tag">2025</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bug%E6%80%BB%E7%BB%93/" rel="tag">Bug总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CVPR/" rel="tag">CVPR</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CVPR-Workshop/" rel="tag">CVPR Workshop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICLR/" rel="tag">ICLR</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICML/" rel="tag">ICML</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Knife4j/" rel="tag">Knife4j</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MinIO/" rel="tag">MinIO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis-Plus/" rel="tag">Mybatis-Plus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NeurIPS/" rel="tag">NeurIPS</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ODE%E6%B1%82%E8%A7%A3/" rel="tag">ODE求解</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RocketMQ/" rel="tag">RocketMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/diffusion/" rel="tag">diffusion</a><span class="tag-list-count">47</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/latex/" rel="tag">latex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95/" rel="tag">代码随想录</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%B4%E5%87%BD%E6%95%B0/" rel="tag">头函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%9A%E5%BA%AD%E5%85%AC%E5%AF%93/" rel="tag">尚庭公寓</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" rel="tag">异常处理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" rel="tag">快速入门</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/" rel="tag">技术总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E7%BB%84/" rel="tag">数组</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E8%A7%A3/" rel="tag">注解</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%AB%99/" rel="tag">网站</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%A5%E4%BE%9D/" rel="tag">若依</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E6%96%87/" rel="tag">论文</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%BE%E8%A1%A8i/" rel="tag">链表i</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" rel="tag">项目实战</a><span class="tag-list-count">6</span></li></ul>
        </canvas>
    </div>
</div>



    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zongqing Li</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #4D4D4C;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #F7F7F7;
      background-image: linear-gradient(#F7F7F7, #F7F7F7);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>

  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('post.copy_button').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('post.copy_success')
          else $(this).text('post.copy_failure')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('post.copy_button')
        }, 300)
      }).append(e)
    })
  </script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
