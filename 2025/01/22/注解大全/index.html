<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hqulzq.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Spring 注解和 DI 相关的注解@Autowired可以在构造函数、Setter 方法或字段注入中使用 @Autowired 注解，Spring 会解析并注入依赖。构造函数注入： 12345678class Car &amp;#123;    Engine engine;    @Autowired    Car(Engine engine) &amp;#123;        this.engine &#x3D;">
<meta property="og:type" content="article">
<meta property="og:title" content="注解大全">
<meta property="og:url" content="https://hqulzq.github.io/2025/01/22/%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/index.html">
<meta property="og:site_name" content="Lzq&#39;s blog">
<meta property="og:description" content="Spring 注解和 DI 相关的注解@Autowired可以在构造函数、Setter 方法或字段注入中使用 @Autowired 注解，Spring 会解析并注入依赖。构造函数注入： 12345678class Car &amp;#123;    Engine engine;    @Autowired    Car(Engine engine) &amp;#123;        this.engine &#x3D;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-01-22T12:22:04.000Z">
<meta property="article:modified_time" content="2025-02-27T02:37:03.644Z">
<meta property="article:author" content="Zongqing Li">
<meta property="article:tag" content="注解">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hqulzq.github.io/2025/01/22/%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>注解大全 | Lzq's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Lzq's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">49</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">104</span></a>

  </li>
        <li class="menu-item menu-item-book">

    <a href="/book" rel="section"><i class="fas fa-book fa-fw"></i>Book</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hqulzq.github.io/2025/01/22/%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://github.com/hqulzq/hqulzq.github.io/blob/main/images/userimg.jpg?raw=true">
      <meta itemprop="name" content="Zongqing Li">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lzq's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          注解大全
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-01-22 20:22:04" itemprop="dateCreated datePublished" datetime="2025-01-22T20:22:04+08:00">2025-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-02-27 10:37:03" itemprop="dateModified" datetime="2025-02-27T10:37:03+08:00">2025-02-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Spring-注解"><a href="#Spring-注解" class="headerlink" title="Spring 注解"></a>Spring 注解</h1><h2 id="和-DI-相关的注解"><a href="#和-DI-相关的注解" class="headerlink" title="和 DI 相关的注解"></a>和 DI 相关的注解</h2><h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>可以在构造函数、Setter 方法或字段注入中使用 @Autowired 注解，Spring 会解析并注入依赖。<br>构造函数注入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    Engine engine;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Car(Engine engine) &#123;</span><br><span class="line">        <span class="built_in">this</span>.engine = engine;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Setter 注入:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    Engine engine;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setEngine</span><span class="params">(Engine engine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.engine = engine;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字段注入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Engine engine;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Autowired 有一个名为 required 的 boolean 参数，默认值为 true。当 Spring 找不到合适的 Bean 进行注入时，它会控制 Spring 的行为。当值为 true 时，会抛出异常，反之则不会。<br>注意，如果使用构造函数注入，所有构造函数参数都是 必须的 。<br>从 Spring 4.3 开始，除非声明了至少两个构造函数，否则不需要用 @Autowired 明确注解构造函数。<br><span id="more"></span></p>
<h3 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a>@Bean</h3><p>@Bean 用于标记工厂方法，用于实例化 Spring Bean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">Engine <span class="title function_">engine</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Engine</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生成的 Bean 的名称与工厂方法的名称相同。如果想使用不同的名称，可以使用此注解的 name 或 value 参数（value 是 name 的别名）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean(&quot;engine&quot;)</span></span><br><span class="line">Engine <span class="title function_">getEngine</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Engine</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，所有注解为 @Bean 的方法必须位于 @Configuration 类中。</p>
<h3 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h3><p>在模糊情况下，使用 @Qualifier 注解与 @Autowired 注解一起，提供想要使用的 Bean 的 ID 或名称。</p>
<p>以下两个 Bean 实现了相同的接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>如果 Spring 需要注入一个 Vehicle Bean，最终会出现多个匹配的定义。在这种情况下，可以使用 @Qualifier 注解显式地提供 Bean 的名称。</p>
<p>构造函数注入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">Biker(<span class="meta">@Qualifier(&quot;bike&quot;)</span> Vehicle vehicle) &#123;</span><br><span class="line">    <span class="built_in">this</span>.vehicle = vehicle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Setter 注入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setVehicle</span><span class="params">(<span class="meta">@Qualifier(&quot;bike&quot;)</span> Vehicle vehicle)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.vehicle = vehicle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier(&quot;bike&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setVehicle</span><span class="params">(Vehicle vehicle)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.vehicle = vehicle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字段注入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier(&quot;bike&quot;)</span></span><br><span class="line">Vehicle vehicle;</span><br></pre></td></tr></table></figure>
<h3 id="Required"><a href="#Required" class="headerlink" title="@Required"></a>@Required</h3><p>@Required 用于 Setter 方法，以标记我们希望通过 XML 填充的依赖：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Required</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(String color)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.color = color;</span><br><span class="line">&#125;</span><br><span class="line">&lt;bean class=<span class="string">&quot;com.baeldung.annotations.Bike&quot;</span>&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;color&quot;</span> value=<span class="string">&quot;green&quot;</span> /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>否则，将抛出 BeanInitializationException 异常。</p>
<h3 id="Value"><a href="#Value" class="headerlink" title="@Value"></a>@Value</h3><p>可以使用 @Value 向 Bean 注入属性值。它与构造函数、Setter 和字段注入兼容。</p>
<p>构造函数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Engine(<span class="meta">@Value(&quot;8&quot;)</span> <span class="type">int</span> cylinderCount) &#123;</span><br><span class="line">    <span class="built_in">this</span>.cylinderCount = cylinderCount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Setter 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setCylinderCount</span><span class="params">(<span class="meta">@Value(&quot;8&quot;)</span> <span class="type">int</span> cylinderCount)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.cylinderCount = cylinderCount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;8&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setCylinderCount</span><span class="params">(<span class="type">int</span> cylinderCount)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.cylinderCount = cylinderCount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字段：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;8&quot;)</span></span><br><span class="line"><span class="type">int</span> cylinderCount;</span><br></pre></td></tr></table></figure>
<p>注入静态值并不实用。因此，可以在 @Value 中使用占位符字符串来注入外部资源中定义的值，例如 .properties 或 .yaml 文件中的值。</p>
<p>假设有以下 .properties 文件：</p>
<p>engine.fuelType=petrol<br>可以用下面的方法注入 engine.fuelType 的值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;engine.fuelType&#125;&quot;)</span></span><br><span class="line">String fuelType;</span><br></pre></td></tr></table></figure>
<p>甚至可以在 SpEL 中使用 @Value。</p>
<h3 id="DependsOn"><a href="#DependsOn" class="headerlink" title="@DependsOn"></a>@DependsOn</h3><p>可以使用此注解让 Spring 在注解的 Bean 之前初始化其他 Bean。通常情况下，这种行为是自动进行的，基于 Bean 之间的显式依赖关系。</p>
<p>只有当依赖关系是隐式的，例如 JDBC 驱动加载或静态变量初始化时，才需要此注解。</p>
<p>可以在依赖类上使用 @DependsOn 来指定依赖 Bean 的名称。注解的 value 参数需要一个包含依赖 Bean 名称的数组：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DependsOn(&quot;engine&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>或者，如果我们使用 @Bean 注解定义 Bean，那么就应该在工厂方法上使用 @DependsOn 注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@DependsOn(&quot;fuel&quot;)</span></span><br><span class="line">Engine <span class="title function_">engine</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Engine</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Lazy"><a href="#Lazy" class="headerlink" title="@Lazy"></a>@Lazy</h3><p>当我们希望延迟初始化 Bean 时，可以使用 @Lazy 注解。默认情况下，Spring 在 Application Context 启动时会立即创建所有 Singleton（单例）Bean。</p>
<p>不过，在某些情况下，我们需要在使用时创建 Bean，而不是在应用启动时。</p>
<p>这个注解会根据具体标注位置而有不同的表现，可以用在如下位置：</p>
<p>@Bean 注解的 Bean 工厂方法，可以延迟方法调用（从而延迟 Bean 的创建）。<br>@Configuration 类，包含的 @Bean 方法都将受到影响<br>@Component 类，而该组件类不是 @Configuration 类，则该 Bean 将被延迟地初始化<br>@Autowired 构造函数、Setter 方法或字段，用于延迟地（通过代理）加载依赖本身<br>该注解有一个名为 value 的参数，默认值为 true。它可以覆盖默认行为。</p>
<p>当全局设置为懒加载（lazy）时，可以标记要立即加载的 Bean，或者在使用 @Lazy 标记的 @Configuration 类中，配置特定的 @Bean 方法以进行立即加载：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Lazy</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactoryConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Lazy(false)</span>  <span class="comment">// 立即加载</span></span><br><span class="line">    Engine <span class="title function_">engine</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Engine</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Lookup"><a href="#Lookup" class="headerlink" title="@Lookup"></a>@Lookup</h3><p>使用 @Lookup 注解的方法会告诉 Spring，在调用该方法时返回该方法返回类型的实例。</p>
<h3 id="Primary"><a href="#Primary" class="headerlink" title="@Primary"></a>@Primary</h3><p>有时，需要定义多个相同类型的 Bean。在这种情况下，注入将不会成功，因为 Spring 不知道需要注入哪个 Bean。</p>
<p>上文已经介绍了处理这种情况的方法：用 @Qualifier 标记所有注入点，并指定所需的 Bean 名称。</p>
<p>可以使用 @Primary 注解来简化这种情况：将最常用的 Bean 标记为 @Primary，它将在未标记 @Qualifier 的注入点上被选中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Primary</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Driver</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Vehicle vehicle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Biker</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;bike&quot;)</span></span><br><span class="line">    Vehicle vehicle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在前面的示例中，Car 注解了 @Primary。因此，在 Driver 类中，Spring 注入了一个 Car Bean。当然，在 Biker Bean 中，vehicle 字段的值将是 Bike 对象，因为它注解了 @Qualifier 并且指定了 Bean 名称。</p>
<h3 id="Scope"><a href="#Scope" class="headerlink" title="@Scope"></a>@Scope</h3><p>使用 @Scope 来定义 @Component 类或 @Bean 的 Scope（作用域），它可以是 singleton、prototype、request、session、globalSession 或某些自定义作用域。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Engine</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Context-配置注解"><a href="#Context-配置注解" class="headerlink" title="Context 配置注解"></a>Context 配置注解</h2><h3 id="Profile"><a href="#Profile" class="headerlink" title="@Profile"></a>@Profile</h3><p>如果我们希望 Spring 仅在特定 Profile（配置文件）处于活动状态时才启用 @Component 类或 @Bean 方法，可以使用 @Profile 对其进行标记。<br>使用注解的 value 参数配置 Profile 的名称：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Profile(&quot;sportDay&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h3><p>可以使用该注解来使用特定的 @Configuration 类，而无需进行组件扫描。<br>通过 @Import 注解的 value 参数来提供这些类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(VehiclePartSupplier.class)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactoryConfig</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ImportResource"><a href="#ImportResource" class="headerlink" title="@ImportResource"></a>@ImportResource</h3><p>可以使用该注解导入 XML 配置。用 locations 参数或其别名 value 参数指定 XML 文件的位置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ImportResource(&quot;classpath:/annotations.xml&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactoryConfig</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="PropertySource"><a href="#PropertySource" class="headerlink" title="@PropertySource"></a>@PropertySource</h3><p>通过该注解，可以为应用设置定义属性文件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:/annotations.properties&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactoryConfig</span> &#123;&#125;</span><br><span class="line"><span class="meta">@PropertySource</span> 利用了 Java <span class="number">8</span> 的重复注解功能，这意味着可以用它多次标记一个类：</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:/annotations.properties&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:/vehicle-factory.properties&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactoryConfig</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="PropertySources"><a href="#PropertySources" class="headerlink" title="@PropertySources"></a>@PropertySources</h3><p>可以使用此注解指定多个 @PropertySource 配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySources(&#123; </span></span><br><span class="line"><span class="meta">    @PropertySource(&quot;classpath:/annotations.properties&quot;),</span></span><br><span class="line"><span class="meta">    @PropertySource(&quot;classpath:/vehicle-factory.properties&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactoryConfig</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>注意，自 Java 8 以来，可以通过上述重复注解的特性来实现同样的功能。</p>
<h1 id="Spring-MVC-注解"><a href="#Spring-MVC-注解" class="headerlink" title="Spring MVC 注解"></a>Spring MVC 注解</h1><h2 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h2><p>@Controller 注解用于标识一个类为Spring MVC控制器，负责处理HTTP请求并返回视图。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    <span class="comment">// 控制器方法定义...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h2><p>@RestController 注解是@Controller和@ResponseBody的组合，用于RESTful Web服务的控制器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRestController</span> &#123;</span><br><span class="line">    <span class="comment">// 控制器中的方法将直接返回响应体。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h2><p>@RequestMapping 注解用于将HTTP请求映射到控制器的处理方法上。<br>注解属性介绍:</p>
<ul>
<li>value: 请求的URL路径。</li>
<li>method: 支持的HTTP方法。</li>
<li>params: 请求参数条件。</li>
<li>headers: 请求头条件。</li>
</ul>
<p>当value设置为”/users/{id}”，method为RequestMethod.GET，params为”active=true”，headers为”Accept=application/json”时：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET /users/<span class="number">123</span>?active=<span class="literal">true</span></span><br><span class="line">Accept: application/json</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/users/&#123;id&#125;&quot;, method = RequestMethod.GET, params = &quot;active=true&quot;, headers = &quot;Accept=application/json&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;List&lt;User&gt;&gt; <span class="title function_">listActiveUsers</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="comment">// 根据用户ID获取激活用户的列表。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="GetMapping"><a href="#GetMapping" class="headerlink" title="@GetMapping"></a>@GetMapping</h2><p>@GetMapping 注解用于映射GET请求到控制器的方法上。<br>注解属性介绍:</p>
<ul>
<li>value: 请求的URL路径。</li>
</ul>
<p>当value设置为”/users/{id}”时，请求/users/123将映射到方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /users/<span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="comment">// 根据路径变量&#123;id&#125;获取用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PostMapping"><a href="#PostMapping" class="headerlink" title="@PostMapping"></a>@PostMapping</h2><p>@PostMapping 注解用于映射POST请求到控制器的方法上。<br>注解属性介绍:</p>
<ul>
<li>value: 请求的URL路径。<br>当value设置为”/users”时，带有JSON请求体的POST请求将映射到方法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /users</span><br><span class="line">Content-Type: application/json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line"><span class="comment">// 使用JSON请求体中的数据创建新用户。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PutMapping"><a href="#PutMapping" class="headerlink" title="@PutMapping"></a>@PutMapping</h2><p>@PutMapping 注解用于映射HTTP PUT请求到控制器的方法上，通常用于更新资源。</p>
<p>注解属性介绍</p>
<ul>
<li>value: 请求的URL路径。<br>当value设置为”/users/{id}”时，请求将映射到更新用户的方法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">PUT /users/<span class="number">123</span></span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Jane Doe&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: <span class="number">25</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@PutMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">updateUser</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id, <span class="meta">@RequestBody</span> User userDetails)</span> &#123;</span><br><span class="line"><span class="comment">// 使用请求体中的数据更新指定ID的用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="DeleteMapping"><a href="#DeleteMapping" class="headerlink" title="@DeleteMapping"></a>@DeleteMapping</h2><p>@DeleteMapping 注解用于映射HTTP DELETE请求到控制器的方法上，用于删除资源。<br>注解属性介绍</p>
<ul>
<li>value: 请求的URL路径。</li>
</ul>
<p>当value设置为”/users/{id}”时，请求将映射到删除用户的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DELETE /users/<span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;?&gt; deleteUser(<span class="meta">@PathVariable</span> <span class="type">int</span> id) &#123;</span><br><span class="line"><span class="comment">// 根据用户ID删除用户。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PatchMapping"><a href="#PatchMapping" class="headerlink" title="@PatchMapping"></a>@PatchMapping</h2><p>@PatchMapping 注解用于映射HTTP PATCH请求到控制器的方法上，通常用于部分更新资源。</p>
<p>注解属性介绍</p>
<ul>
<li>value: 请求的URL路径。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">当value设置为<span class="string">&quot;/users/&#123;id&#125;&quot;</span>时，请求将映射到部分更新用户的方法：</span><br><span class="line"></span><br><span class="line">PATCH /users/<span class="number">123</span></span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Jane Doe&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PatchMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">patchUser</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id, <span class="meta">@RequestBody</span> Map&lt;String, Object&gt; updates)</span> &#123;</span><br><span class="line"><span class="comment">// 使用请求体中的部分数据更新指定ID的用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h2><p>@RequestParam 注解用于将请求参数绑定到控制器方法的参数上。<br>注解属性介绍</p>
<ul>
<li>value: 请求参数的名称。</li>
<li>required: 指示参数是否必须。</li>
<li>defaultValue: 参数的默认值。</li>
</ul>
<p>当请求包含查询参数”page”和”size”时：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /items?page=<span class="number">1</span>&amp;size=<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/items&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Item&gt; <span class="title function_">listItems</span><span class="params">(</span></span><br><span class="line"><span class="params"><span class="meta">@RequestParam(value = &quot;page&quot;, defaultValue = &quot;1&quot;)</span> <span class="type">int</span> page,</span></span><br><span class="line"><span class="params"><span class="meta">@RequestParam(value = &quot;size&quot;, defaultValue = &quot;10&quot;)</span> <span class="type">int</span> size</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line"><span class="comment">// 根据请求的页码和大小返回项目列表。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h2><p>@PathVariable 注解用于将URL中的模板变量绑定到控制器方法的参数上。</p>
<p>注解属性介绍</p>
<ul>
<li>value: 模板变量的名称。</li>
<li>required: 指示变量是否必须。</li>
</ul>
<p>当URL模板包含”{id}”时，请求/users/123将映射到方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /users/<span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="comment">// 根据URL路径变量&#123;id&#125;获取用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h2><p>@RequestBody 注解用于将请求体绑定到控制器方法的参数上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /users</span><br><span class="line">Content-Type: application/json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line"><span class="comment">// 使用请求体中的数据创建新用户。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="@RequestHeader"></a>@RequestHeader</h2><p>@RequestHeader 注解用于将请求头绑定到控制器方法的参数上。</p>
<p>注解属性介绍</p>
<ul>
<li>value: 请求头的名称。</li>
<li>required: 指示请求头是否必须。</li>
</ul>
<p>请求包含自定义请求头”X-Request-ID”：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /users</span><br><span class="line">X-Request-ID: <span class="number">123456789</span></span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">listUsers</span><span class="params">(<span class="meta">@RequestHeader(value = &quot;X-Request-ID&quot;, required = false)</span> String requestId)</span> &#123;</span><br><span class="line"><span class="comment">// 根据请求头&quot;X-Request-ID&quot;记录日志或进行追踪。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CookieValue"><a href="#CookieValue" class="headerlink" title="@CookieValue"></a>@CookieValue</h2><p>@CookieValue 注解用于将请求中Cookie的值绑定到控制器方法的参数上。</p>
<p>注解属性介绍</p>
<ul>
<li>value: Cookie的名称。</li>
<li>required: 指示Cookie是否必须。</li>
</ul>
<p>请求包含名为”sessionId”的Cookie：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /users</span><br><span class="line">Cookie: sessionId=abc123def456</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">listUsers</span><span class="params">(<span class="meta">@CookieValue(value = &quot;sessionId&quot;, required = false)</span> String sessionId)</span> &#123;</span><br><span class="line"><span class="comment">// 根据Cookie中的&quot;sessionId&quot;进行会话管理。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a>@ModelAttribute</h2><p>@ModelAttribute 注解用于将请求参数或表单数据绑定到模型属性上。<br>注解属性介绍</p>
<ul>
<li>value: 模型属性的名称。</li>
<li>required: 指示模型属性是否必须。</li>
</ul>
<p>一个包含用户信息的POST请求：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /users</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">name=John+Doe&amp;age=<span class="number">30</span></span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addUser</span><span class="params">(Model model, <span class="meta">@ModelAttribute</span> User user)</span> &#123;</span><br><span class="line">model.addAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line"><span class="comment">// 将用户信息添加到模型中，以便在视图中展示。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SessionAttribute"><a href="#SessionAttribute" class="headerlink" title="@SessionAttribute"></a>@SessionAttribute</h2><p>@SessionAttribute 注解用于将模型属性存储到HTTP会话中。<br>注解属性介绍</p>
<ul>
<li>name: 会话属性的名称。</li>
<li>value: 会话属性的值。</li>
</ul>
<p>将用户信息存储在会话中，以便跨请求访问：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /user/profile</span><br><span class="line">Cookie: JSESSIONID=abc123; user=John Doe</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@SessionAttribute(name = &quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">showProfile</span><span class="params">(Model model)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> (String) model.asMap().get(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="comment">// 从会话中获取用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestAttribute"><a href="#RequestAttribute" class="headerlink" title="@RequestAttribute"></a>@RequestAttribute</h2><p>@RequestAttribute 注解用于将请求属性绑定到控制器方法的参数上。<br>注解属性介绍</p>
<ul>
<li>value: 请求属性的名称。</li>
</ul>
<p>从请求转发中携带属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /login</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Redirect /user/profile?role=admin</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/user/profile&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">showProfile</span><span class="params">(<span class="meta">@RequestAttribute(&quot;role&quot;)</span> String role)</span> &#123;</span><br><span class="line"><span class="comment">// 根据请求属性&quot;role&quot;展示不同的用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ResponseStatus"><a href="#ResponseStatus" class="headerlink" title="@ResponseStatus"></a>@ResponseStatus</h2><p>@ResponseStatus 注解用于指定HTTP响应的status。<br>注解属性介绍</p>
<ul>
<li>value: 指定的HTTP状态。</li>
</ul>
<p>当资源未找到时返回404状态：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /users/<span class="number">999</span></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">404</span> Not Found</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ResourceNotFoundException.class)</span></span><br><span class="line">    <span class="meta">@ResponseStatus(HttpStatus.NOT_FOUND)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title function_">handleResourceNotFound</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 处理资源未找到的异常。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ExceptionHandler"><a href="#ExceptionHandler" class="headerlink" title="@ExceptionHandler"></a>@ExceptionHandler</h2><p>@ExceptionHandler 注解用于处理控制器中抛出的特定异常。<br>注解属性介绍</p>
<ul>
<li>value: 指定异常的类型。</li>
</ul>
<p>捕获并处理自定义的业务异常：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /users</span><br><span class="line">...</span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">400</span> Bad Request</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"><span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title function_">handleBusinessException</span><span class="params">(BusinessException ex)</span> &#123;</span><br><span class="line">    <span class="comment">// 处理业务异常。</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CrossOrigin"><a href="#CrossOrigin" class="headerlink" title="@CrossOrigin"></a>@CrossOrigin</h2><p>@CrossOrigin 注解用于启用跨源请求。</p>
<p>注解属性介绍</p>
<ul>
<li>origins: 允许的来源。</li>
<li>methods: 允许的HTTP方法。</li>
<li>allowedHeaders: 允许的请求头。</li>
</ul>
<p>允许特定域名进行跨域GET请求：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">OPTIONS /api/data</span><br><span class="line">Access-Control-Request-Method: GET</span><br><span class="line">Origin: &lt;http:<span class="comment">//example.com&gt;</span></span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@CrossOrigin(origins = &quot;&lt;http://example.com&gt;&quot;, methods = &#123;RequestMethod.GET&#125;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/api/data&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Data&gt; <span class="title function_">getAllData</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// 返回数据列表，允许跨域GET请求。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="MatrixVariable"><a href="#MatrixVariable" class="headerlink" title="@MatrixVariable"></a>@MatrixVariable</h2><p>@MatrixVariable 注解用于从URL的矩阵变量中获取值。</p>
<p>注解属性介绍</p>
<ul>
<li>pathVar: 指定矩阵变量所在的路径变量名称。</li>
</ul>
<p>从URL中获取矩阵变量的值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /api/users/<span class="number">123</span>;role=admin</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/api/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@MatrixVariable(name = &quot;role&quot;, pathVar = &quot;id&quot;)</span> String role)</span> &#123;</span><br><span class="line"><span class="comment">// 根据矩阵变量&quot;role&quot;获取用户角色。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="InitBinder"><a href="#InitBinder" class="headerlink" title="@InitBinder"></a>@InitBinder</h2><p>@InitBinder 注解用于在控制器中初始化WebDataBinder，通常用于注册自定义属性编辑器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    <span class="meta">@InitBinder</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initBinder</span><span class="params">(WebDataBinder binder)</span> &#123;</span><br><span class="line">        <span class="comment">// 注册自定义属性编辑器。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ResponseStatus-1"><a href="#ResponseStatus-1" class="headerlink" title="@ResponseStatus"></a>@ResponseStatus</h2><p>@ResponseStatus 注解用于设置响应的HTTP状态码。<br>注解属性介绍</p>
<ul>
<li>value: 指定的HTTP状态码。</li>
</ul>
<p>当发生特定异常时，返回HTTP 503 Service Unavailable状态码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ResponseStatus(value = HttpStatus.SERVICE_UNAVAILABLE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceUnavailableException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="comment">// 自定义异常类。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Validated"><a href="#Validated" class="headerlink" title="@Validated"></a>@Validated</h2><p>@Validated 注解用于在类或方法级别指定验证组，增强验证逻辑。<br>注解属性介绍</p>
<ul>
<li>groups: 指定验证组。</li>
</ul>
<p>使用特定的验证组对用户注册信息进行验证。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Validated(UserValidationGroup.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRegistrationController</span> &#123;</span><br><span class="line">    <span class="comment">// 该控制器中的方法将使用UserValidationGroup验证组。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Validated-Annotation-with-Groups"><a href="#Validated-Annotation-with-Groups" class="headerlink" title="@Validated Annotation with Groups"></a>@Validated Annotation with Groups</h2><p>@Validated 注解与groups属性结合使用，允许在方法级别指定多个验证组。<br>注解属性介绍</p>
<ul>
<li>value: 指定的验证组数组。</li>
</ul>
<p>对更新操作使用不同的验证组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Validated(&#123;UpdateGroup.class, AnotherUpdateGroup.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEntity</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@NotNull</span> MyEntity entity)</span> &#123;</span><br><span class="line">    <span class="comment">// 使用多个验证组对实体进行验证。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestBodyAdvice"><a href="#RequestBodyAdvice" class="headerlink" title="@RequestBodyAdvice"></a>@RequestBodyAdvice</h2><p>@RequestBodyAdvice 注解用于在读取请求正文之前或之后对请求正文进行处理。<br>注解属性介绍</p>
<ul>
<li>beforeBodyRead: 指定在读取请求正文之前的处理。</li>
<li>afterBodyRead: 指定在读取请求正文之后的处理。</li>
</ul>
<p>对请求正文进行日志记录或修改。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRequestBodyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@RequestBodyAdvice(beforeBodyRead = &quot;logBeforeRead&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logRequestBody</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 在读取请求正文之前进行日志记录。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ControllerAdvice"><a href="#ControllerAdvice" class="headerlink" title="@ControllerAdvice"></a>@ControllerAdvice</h2><p>@ControllerAdvice 注解用于定义一个类，该类可以包含多个@ExceptionHandler、@InitBinder和@ModelAttribute方法。<br>注解属性介绍</p>
<ul>
<li>basePackages: 指定要扫描的包。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyGlobalControllerAdvice</span> &#123;</span><br><span class="line">    <span class="comment">// 包含全局异常处理、属性初始化和模型属性的方法。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="MatrixParam"><a href="#MatrixParam" class="headerlink" title="@MatrixParam"></a>@MatrixParam</h2><p>@MatrixParam 注解用于从URL的矩阵变量中获取值。<br>注解属性介绍</p>
<ul>
<li>name: 矩阵变量的名称。</li>
</ul>
<p>从URL中获取矩阵变量的值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /users;role=admin/<span class="number">123</span></span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@MatrixParam(name = &quot;role&quot;)</span> String role)</span> &#123;</span><br><span class="line"><span class="comment">// 根据矩阵变量&quot;role&quot;获取用户角色。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SessionAttributes"><a href="#SessionAttributes" class="headerlink" title="@SessionAttributes"></a>@SessionAttributes</h2><p>@SessionAttributes 注解用于将模型属性添加到HTTP会话中，以便在多个请求之间保持它们的值。</p>
<p>注解属性介绍</p>
<ul>
<li>names: 要存储在会话中的属性名称数组。</li>
<li>types: 要存储在会话中的属性类型。</li>
</ul>
<p>将用户信息存储在会话中，以便在用户会话期间保持状态：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /user/profile</span><br><span class="line">Cookie: JSESSIONID=abc123; user=John Doe</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@SessionAttributes(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"><span class="comment">// 这个控制器中的模型属性&quot;user&quot;将被存储在会话中。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestAttribute-1"><a href="#RequestAttribute-1" class="headerlink" title="@RequestAttribute"></a>@RequestAttribute</h2><p>@RequestAttribute 注解用于将请求属性绑定到控制器方法的参数上。<br>注解属性介绍</p>
<ul>
<li>value: 请求属性的名称。</li>
</ul>
<p>从请求中获取属性”searchQuery”：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /search?searchQuery=spring</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/search&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">search</span><span class="params">(<span class="meta">@RequestAttribute(&quot;searchQuery&quot;)</span> String query)</span> &#123;</span><br><span class="line"><span class="comment">// 使用请求属性&quot;searchQuery&quot;执行搜索。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ModelAttribute-1"><a href="#ModelAttribute-1" class="headerlink" title="@ModelAttribute"></a>@ModelAttribute</h2><p>@ModelAttribute 注解用于将请求参数或会话属性绑定到模型对象上。<br>注解属性介绍</p>
<ul>
<li>value: 模型对象的名称。</li>
</ul>
<p>将表单提交的参数绑定到用户对象上：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /user/register</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">name=John+Doe&amp;email=&lt;john.doe<span class="meta">@example</span>.com&gt;</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/user/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">registerUser</span><span class="params">(<span class="meta">@ModelAttribute(&quot;user&quot;)</span> User user)</span> &#123;</span><br><span class="line"><span class="comment">// 使用模型中的&quot;user&quot;对象注册新用户。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="CookieValue-1"><a href="#CookieValue-1" class="headerlink" title="@CookieValue"></a>@CookieValue</h2><p>@CookieValue 注解用于将请求中的Cookie值绑定到控制器方法的参数上。<br>注解属性介绍</p>
<ul>
<li>value: Cookie的名称。</li>
</ul>
<p>从请求中获取名为”sessionId”的Cookie值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /user/profile</span><br><span class="line">Cookie: sessionId=abc123</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/user/profile&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">showProfile</span><span class="params">(<span class="meta">@CookieValue(&quot;sessionId&quot;)</span> String sessionId)</span> &#123;</span><br><span class="line"><span class="comment">// 使用Cookie中的&quot;sessionId&quot;进行会话管理。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestBody-1"><a href="#RequestBody-1" class="headerlink" title="@RequestBody"></a>@RequestBody</h2><p>@RequestBody 注解用于将请求正文绑定到控制器方法的参数上。</p>
<p>接收JSON格式的请求正文：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /api/data</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/api/data&quot;)</span></span><br><span class="line"><span class="keyword">public</span> DataItem <span class="title function_">createDataItem</span><span class="params">(<span class="meta">@RequestBody</span> DataItem data)</span> &#123;</span><br><span class="line"><span class="comment">// 使用请求正文中的数据创建新的数据项。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h2><p>@ResponseBody 注解用于指示方法的返回值直接作为HTTP响应正文返回。</p>
<p>返回JSON格式的响应正文：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /api/data/<span class="number">1</span></span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/api/data/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> DataItem <span class="title function_">getDataItem</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="comment">// 直接将数据项作为JSON响应正文返回。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ResponseStatus-2"><a href="#ResponseStatus-2" class="headerlink" title="@ResponseStatus"></a>@ResponseStatus</h2><p>@ResponseStatus 注解用于设置响应的HTTP状态码。<br>注解属性介绍</p>
<ul>
<li>value: 指定的HTTP状态码。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ResponseStatus(HttpStatus.NOT_FOUND)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourceNotFoundException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="comment">// 自定义异常，用于当资源未找到时。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ExceptionHandler-1"><a href="#ExceptionHandler-1" class="headerlink" title="@ExceptionHandler"></a>@ExceptionHandler</h2><p>@ExceptionHandler 注解用于处理控制器抛出的特定异常。<br>注解属性介绍</p>
<ul>
<li>value: 指定异常的类型。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ResourceNotFoundException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">handleResourceNotFound</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 处理资源未找到的异常。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ControllerAdvice-1"><a href="#ControllerAdvice-1" class="headerlink" title="@ControllerAdvice"></a>@ControllerAdvice</h2><p>@ControllerAdvice 注解用于定义一个类，该类可以包含多个@ExceptionHandler、@InitBinder和@ModelAttribute方法，用于全局异常处理和数据绑定。<br>注解属性介绍</p>
<ul>
<li>basePackages: 指定要扫描的包。</li>
</ul>
<p>注解业务案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalControllerAdvice</span> &#123;</span><br><span class="line">    <span class="comment">// 包含全局异常处理、属性初始化和模型属性的方法。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PostMapping-with-consumes-Attribute"><a href="#PostMapping-with-consumes-Attribute" class="headerlink" title="@PostMapping with consumes Attribute"></a>@PostMapping with consumes Attribute</h2><p>@PostMapping 注解与 consumes 属性结合使用，用于指定请求体的媒体类型。</p>
<p>注解属性介绍</p>
<ul>
<li>consumes: 指定请求体的媒体类型，如 application/json。</li>
</ul>
<p>发送POST请求创建新用户，请求体为JSON格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /users</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;&lt;john.doe@example.com&gt;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(value = &quot;/users&quot;, consumes = &quot;application/json&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line"><span class="comment">// 使用JSON请求体中的数据创建新用户。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="GetMapping-with-produces-Attribute"><a href="#GetMapping-with-produces-Attribute" class="headerlink" title="@GetMapping with produces Attribute"></a>@GetMapping with produces Attribute</h2><p>@GetMapping 注解与 produces 属性结合使用，用于指定响应的媒体类型。<br>注解属性介绍</p>
<ul>
<li>produces: 指定响应的媒体类型，如 application/json。</li>
</ul>
<p>发送GET请求获取用户列表，期望响应为JSON格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /users</span><br><span class="line">Accept: application/json</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(value = &quot;/users&quot;, produces = &quot;application/json&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;List&lt;User&gt;&gt; <span class="title function_">getUsers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// 以JSON格式返回用户列表。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ExceptionHandler-with-responseBody-Attribute"><a href="#ExceptionHandler-with-responseBody-Attribute" class="headerlink" title="@ExceptionHandler with responseBody Attribute"></a>@ExceptionHandler with responseBody Attribute</h2><p>@ExceptionHandler 注解与 responseBody 属性结合使用，用于返回异常信息。<br>注解属性介绍</p>
<ul>
<li>responseBody: 指定异常处理方法的返回值是否作为响应正文。</li>
</ul>
<p>处理资源未找到的异常，并返回JSON格式的错误信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /users/<span class="number">999</span></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">404</span> Not Found</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2023-10-10T12:00:00&quot;</span>, <span class="string">&quot;status&quot;</span>: <span class="number">404</span>, <span class="string">&quot;error&quot;</span>: <span class="string">&quot;Not Found&quot;</span>&#125;</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"><span class="meta">@ExceptionHandler(ResourceNotFoundException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Object&gt; <span class="title function_">handleResourceNotFound</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 返回JSON格式的错误信息。</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ControllerAdvice-with-basePackages"><a href="#ControllerAdvice-with-basePackages" class="headerlink" title="@ControllerAdvice with basePackages"></a>@ControllerAdvice with basePackages</h2><p>@ControllerAdvice 注解与 basePackages 属性结合使用，用于定义全局异常处理和数据绑定的类。<br>注解属性介绍</p>
<ul>
<li>basePackages: 指定要扫描的包，这些包中的控制器将使用 @ControllerAdvice 类中定义的方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice(basePackages = &quot;com.example.web&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalControllerAdvice</span> &#123;</span><br><span class="line">    <span class="comment">// 包含全局异常处理、属性初始化和模型属性的方法。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SessionAttribute-with-name"><a href="#SessionAttribute-with-name" class="headerlink" title="@SessionAttribute with name"></a>@SessionAttribute with name</h2><p>@SessionAttribute 注解与 name 属性结合使用，用于从HTTP会话中获取属性。<br>注解属性介绍</p>
<ul>
<li>name: 指定会话属性的名称。</li>
</ul>
<p>从会话中获取名为”user”的属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET /user/profile</span><br><span class="line">Cookie: JSESSIONID=abc123; user=John Doe</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/user/profile&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">showProfile</span><span class="params">(<span class="meta">@SessionAttribute(&quot;user&quot;)</span> String user)</span> &#123;</span><br><span class="line"><span class="comment">// 使用会话中的&quot;user&quot;属性展示用户信息。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestHeader-1"><a href="#RequestHeader-1" class="headerlink" title="@RequestHeader"></a>@RequestHeader</h2><p>@RequestHeader 注解用于将特定的HTTP请求头值绑定到控制器方法的参数上。<br>注解属性介绍</p>
<ul>
<li>value: 请求头的名称。</li>
<li>defaultValue: 当请求头不存在时使用的默认值。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">获取User-Agent请求头的值：</span><br><span class="line"></span><br><span class="line">GET /api/resource</span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64)</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/api/resource&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;?&gt; handleRequest(<span class="meta">@RequestHeader(&quot;User-Agent&quot;)</span> String userAgent) &#123;</span><br><span class="line"><span class="comment">// 根据User-Agent处理请求。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h2><p>@Component 是Spring的通用注解，用于标识一个类为Spring组件，可以被自动扫描和注册为Spring应用上下文的Bean。<br>注解属性介绍</p>
<ul>
<li>value: 指定组件的名称。<br>注解业务案例</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;myComponent&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">    <span class="comment">// 这个类会被Spring自动注册为一个Bean。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Service"><a href="#Service" class="headerlink" title="@Service"></a>@Service</h2><p>@Service 是Spring的注解，用于标识一个类为服务层组件，通常包含业务逻辑。<br>注解业务案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">    <span class="comment">// 服务层组件，包含业务逻辑。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Repository"><a href="#Repository" class="headerlink" title="@Repository"></a>@Repository</h2><p>@Repository 是Spring Data的注解，用于标识一个类为数据访问对象，通常用于数据库访问。</p>
<p>注解业务案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;User, Long&gt; &#123;</span><br><span class="line">    <span class="comment">// 定义数据访问方法。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Profile-1"><a href="#Profile-1" class="headerlink" title="@Profile"></a>@Profile</h2><p>@Profile 注解用于根据激活的配置文件激活或禁用Bean。<br>注解属性介绍</p>
<ul>
<li>value: 指定配置文件的名称。</li>
</ul>
<p>注解业务案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Profile(&quot;dev&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DevConfig</span> &#123;</span><br><span class="line">    <span class="comment">// 仅在&quot;dev&quot;配置文件激活时使用。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RequestPart"><a href="#RequestPart" class="headerlink" title="@RequestPart"></a>@RequestPart</h2><p>@RequestPart 注解用于处理multipart/form-data请求中的部分，如文件上传。<br>注解属性介绍</p>
<ul>
<li>value: 请求部分的名称。</li>
</ul>
<p>处理包含文件的multipart请求：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /api/upload</span><br><span class="line">Content-Type: multipart/form-data; boundary=----WebKitFormBoundary</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary</span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;file&quot;</span>; filename=<span class="string">&quot;image.png&quot;</span></span><br><span class="line">Content-Type: image/png</span><br><span class="line"></span><br><span class="line">[文件内容]</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary--</span><br><span class="line"> 注解业务案例</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/api/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">handleFileUpload</span><span class="params">(</span></span><br><span class="line"><span class="params"><span class="meta">@RequestPart(&quot;file&quot;)</span> MultipartFile file</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line"><span class="comment">// 处理上传的文件。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Spring-Boot-注解"><a href="#Spring-Boot-注解" class="headerlink" title="Spring Boot 注解"></a>Spring Boot 注解</h1><h2 id="ConfigurationProperties"><a href="#ConfigurationProperties" class="headerlink" title="@ConfigurationProperties"></a>@ConfigurationProperties</h2><p>@ConfigurationProperties 是 Spring Boot 提供的一个注解，主要用于将配置文件（如 application.properties 或 application.yml）中的属性值绑定到 Java 类的字段上。通过该注解，可以将一组相关的配置属性封装到一个 Java 类中，方便管理和使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;myapp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAppProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myapp.name</span>=<span class="string">My Application</span></span><br><span class="line"><span class="attr">myapp.port</span>=<span class="string">8080</span></span><br></pre></td></tr></table></figure>
<h2 id="EnableConfigurationProperties"><a href="#EnableConfigurationProperties" class="headerlink" title="@EnableConfigurationProperties"></a>@EnableConfigurationProperties</h2><p>@EnableConfigurationProperties 用于启用 @ConfigurationProperties 注解的类。当使用 @ConfigurationProperties 注解标记一个类后，需要使用 @EnableConfigurationProperties 注解来告知 Spring Boot 去扫描并绑定这些配置属性类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(MyAppProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="comment">// 配置类可以包含其他配置信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ConditionalOnProperty"><a href="#ConditionalOnProperty" class="headerlink" title="@ConditionalOnProperty"></a>@ConditionalOnProperty</h2><p>@ConditionalOnProperty 是一个条件注解，用于根据配置文件中的属性值来决定是否加载某个 Bean 或配置类。只有当配置文件中指定的属性满足特定条件时，被该注解标记的 Bean 或配置类才会被创建和加载。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConditionalConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnProperty(name = &quot;myapp.feature.enabled&quot;, havingValue = &quot;true&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> MyFeature <span class="title function_">myFeature</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyFeature</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyFeature</span> &#123;</span><br><span class="line">    <span class="comment">// 自定义功能类</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Spring-Cloud-注解"><a href="#Spring-Cloud-注解" class="headerlink" title="Spring Cloud 注解"></a>Spring Cloud 注解</h1><h1 id="Jackson"><a href="#Jackson" class="headerlink" title="Jackson"></a>Jackson</h1><h2 id="序列化注解"><a href="#序列化注解" class="headerlink" title="序列化注解"></a>序列化注解</h2><h3 id="JsonAnyGetter"><a href="#JsonAnyGetter" class="headerlink" title="@JsonAnyGetter"></a>@JsonAnyGetter</h3><p>该注解用于把可变的Map类型属性当做标准属性。<br>下例中，ExtendableBean实体有一个name属性和一组kay/value格式的可扩展属性:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ExtendableBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; properties;</span><br><span class="line">    <span class="meta">@JsonAnyGetter</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">getProperties</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> properties;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ExtendableBean</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        properties = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String key, String value)</span>&#123;</span><br><span class="line">        properties.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说明: name属性访问级别是public, 是为了省略get/set方法, 简化示例<br>下面是把ExtendableBean实体序列化的过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonAnyGetter_thenCorrect</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ExtendableBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExtendableBean</span>(<span class="string">&quot;My bean&quot;</span>);</span><br><span class="line">        bean.add(<span class="string">&quot;attr1&quot;</span>, <span class="string">&quot;val1&quot;</span>);</span><br><span class="line">        bean.add(<span class="string">&quot;attr2&quot;</span>, <span class="string">&quot;val2&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result = <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>序列化后的结果: {“name”:”My bean”,”attr2”:”val2”,”attr1”:”val1”}</p>
<h3 id="JsonGetter"><a href="#JsonGetter" class="headerlink" title="@JsonGetter"></a>@JsonGetter</h3><p>该注解是@JsonProperty的两个作用中的一个, 用来标记一个方法是getter方法<br>下例中, 指定方法getTheName()是属性name属性的getter方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonGetter(&quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTheName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonGetter_thenCorrect</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">MyBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBean</span>(<span class="number">1</span>, <span class="string">&quot;My bean&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonPropertyOrder"><a href="#JsonPropertyOrder" class="headerlink" title="@JsonPropertyOrder"></a>@JsonPropertyOrder</h3><p>该注解可以指定实体属性序列化后的顺序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonPropertyOrder(&#123; &quot;name&quot;, &quot;id&quot; &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化后的结果:{ “name”:”My bean”, “id”:1}<br>该注解有一个参数alphabetic, 如果为true, 表示按字母顺序序列化,此时输出结果:{ “id”:1, “name”:”My bean”}</p>
<h3 id="JsonRawValue"><a href="#JsonRawValue" class="headerlink" title="@JsonRawValue"></a>@JsonRawValue</h3><p>该注解可以让Jackson在序列化时把属性的值原样输出<br>下面的例子中, 我们给实体属性attrs赋值一个json字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RawBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="meta">@JsonRawValue</span></span><br><span class="line">    <span class="keyword">public</span> String attrs;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonRawValue_thenCorrect</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">throws</span> JsonProcessingException &#123;  </span><br><span class="line">    <span class="type">RawBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RawBean</span>(<span class="string">&quot;My bean&quot;</span>, <span class="string">&quot;&#123;\&quot;attr\&quot;:false&#125;&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果是: {“name”:”Mybean”,”attrs”:{“attr”:false}}</p>
<h3 id="JsonValue"><a href="#JsonValue" class="headerlink" title="@JsonValue"></a>@JsonValue</h3><p>该注解作用于一个方法, 并且只用被注解的方法序列化整个实体对象<br>把1.1的实体例修改如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExtendableBean</span> &#123;</span><br><span class="line">   ...........</span><br><span class="line">   <span class="comment">//把注解换成JsonValue</span></span><br><span class="line">    <span class="meta">@JsonValue</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">getProperties</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> properties;</span><br><span class="line">    &#125;</span><br><span class="line"> ..........</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程不变, 则结果是: {“attr2”:”val2”,”attr1”:”val1”}<br>可见, 属性name没有被序列化</p>
<h3 id="JsonRootName"><a href="#JsonRootName" class="headerlink" title="@JsonRootName"></a>@JsonRootName</h3><p>如果wrapping是使能(enabled), 那么该注解用来指定root wrapper的名称<br>wrapping(包装)的含义是如果序列化实体User的结果是</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么wrapping后的效果如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;User&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面看一个例子, 我们用该注解指明包装实体(wrapper entity)的包装器名称:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonRootName(value = &quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserWithRoot</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>包装器默认名称是实体类名, 这里就是UserWithRoot, 但是注解的value属性把包装器名称改为了user<br>序列化过程(和前面不同, 需要使能包装器)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonRootName_thenCorrect</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">UserWithRoot</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserWithRoot</span>();</span><br><span class="line">        user.id = <span class="number">1</span>;</span><br><span class="line">        user.name = <span class="string">&quot;jackma&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">            objectMapper.enable(SerializationFeature.WRAP_ROOT_VALUE);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> objectMapper.writeValueAsString(user);</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>序列化的结果:{“user”:{“id”:1,”name”:”jackma”}}<br>从Jackson .2.4版本开始, 新增了一个可选参数namespace, 该属性对json没效果, 但是对xml起作用, 修改本例的实体例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonRootName(value = &quot;user&quot;, namespace = &quot;alibaba&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserWithRoot</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用XmlMapper序列化:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonRootName_thenCorrect</span><span class="params">()</span>&#123;</span><br><span class="line">  ..............</span><br><span class="line">            <span class="type">XmlMapper</span> <span class="variable">xmlMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XmlMapper</span>();</span><br><span class="line">            xmlMapper.enable(SerializationFeature.WRAP_ROOT_VALUE);</span><br><span class="line">  ..............</span><br></pre></td></tr></table></figure>
<p>序列化结果:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">xmlns</span>=<span class="string">&quot;alibaba&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">xmlns</span>=<span class="string">&quot;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span> <span class="attr">xmlns</span>=<span class="string">&quot;&quot;</span>&gt;</span>jackma<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="JsonSerialize"><a href="#JsonSerialize" class="headerlink" title="@JsonSerialize"></a>@JsonSerialize</h3><p>该注解用于指定一个自定义序列化器(custom serializer)来序列化实体例的某属性<br>下例中, 用@JsonSerialize的参数using指明实体类属性eventDate的序列化器是CustomDateSerializer类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Event</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonSerialize(using = CustomDateSerializer.class)</span></span><br><span class="line">    <span class="keyword">public</span> Date eventDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是类CustomDateSerializer的定义:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomDateSerializer</span> <span class="keyword">extends</span> <span class="title class_">StdSerializer</span>&lt;Date&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SimpleDateFormat</span> <span class="variable">formatter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;dd-MM-yyyy hh:mm:ss&quot;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomDateSerializer</span><span class="params">()</span> &#123; <span class="built_in">this</span>(<span class="literal">null</span>); &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomDateSerializer</span><span class="params">(Class&lt;Date&gt; t)</span> &#123; <span class="built_in">super</span>(t); &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Date value, JsonGenerator gen, SerializerProvider arg2)</span></span><br><span class="line">     <span class="keyword">throws</span> IOException, JsonProcessingException &#123;</span><br><span class="line">        gen.writeString(formatter.format(value));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonSerialize_thenCorrect</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">SimpleDateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/DD hh:mm:ss&quot;</span>);</span><br><span class="line"> <span class="type">String</span> <span class="variable">toParse</span> <span class="operator">=</span> <span class="string">&quot;2019/08/19 16:28:00&quot;</span>;</span><br><span class="line"> <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line">     date = df.parse(toParse);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">     e.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="type">Event</span> <span class="variable">event</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Event</span>();</span><br><span class="line"> event.name = <span class="string">&quot;party&quot;</span>;</span><br><span class="line"> event.eventDate = date;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line">     <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(event);</span><br><span class="line">     System.out.println(result);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">     e.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化结果: {“name”:”party”,”eventDate”:”2019-08-19 04:28:00”}<br>而如果没有@JsonSerialize注解的序列化结果是: {“name”:”party”,”eventDate”:1566203280000}</p>
<h2 id="反序列化注解"><a href="#反序列化注解" class="headerlink" title="反序列化注解"></a>反序列化注解</h2><h3 id="JsonCreator"><a href="#JsonCreator" class="headerlink" title="@JsonCreator"></a>@JsonCreator</h3><p>该注解可以调整反序列化时构造器/构造工厂的行为<br>当我们需要反序列化的Json字符串和目标实体类不完全匹配时, 这个注解非常有用<br>假设我们要反序列化下面的Json字符串:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;theName&quot;</span>:<span class="string">&quot;My bean&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是, 我们的目标实体类并没有一个名为theName的属性. 现在, 我们不想改变实体类本身, 我们只需在数据导出时做一些控制, 方法就是在构造器中使用@JsonCreator和@JsonProperty注解:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanWithCreator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonCreator</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BeanWithCreator</span><span class="params">(</span></span><br><span class="line"><span class="params">      <span class="meta">@JsonProperty(&quot;id&quot;)</span> <span class="type">int</span> id, </span></span><br><span class="line"><span class="params">      <span class="meta">@JsonProperty(&quot;theName&quot;)</span> String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDeserializingUsingJsonCreator_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;id\&quot;:1,\&quot;theName\&quot;:\&quot;My bean\&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="type">BeanWithCreator</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().readerFor(BeanWithCreator.class).readValue(json);</span><br><span class="line">    assertEquals(<span class="string">&quot;My bean&quot;</span>, bean.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JacksonInject"><a href="#JacksonInject" class="headerlink" title="@JacksonInject"></a>@JacksonInject</h3><p>该注解指明一个属性的值是通过注入得到而不是从Json字符串反序列得到<br>下例的实体例属性id的值用注解标明是注入值:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanWithInject</span> &#123;</span><br><span class="line">    <span class="meta">@JacksonInject</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDeserializingUsingJsonInject_thenCorrect</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;name\&quot;:\&quot;My bean\&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="type">InjectableValues</span> <span class="variable">inject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InjectableValues</span>.Std().addValue(<span class="type">int</span>.class, <span class="number">1</span>);</span><br><span class="line">    <span class="type">BeanWithInject</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().reader(inject).forType(BeanWithInject.class).readValue(json);</span><br><span class="line">    assertEquals(<span class="string">&quot;My bean&quot;</span>, bean.name);</span><br><span class="line">    assertEquals(<span class="number">1</span>, bean.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonAnySetter"><a href="#JsonAnySetter" class="headerlink" title="@JsonAnySetter"></a>@JsonAnySetter</h3><p>该注解允许我们把一个可变的map属性作为标准属性, 在反序列过程中, 从Json字符串得到的属性值会加入到map属性中<br>实体例和注解:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendableBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; properties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonAnySetter</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line">        properties.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>准备反序列化的Json字符串:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;My bean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;attr2&quot;</span>:<span class="string">&quot;val2&quot;</span>,</span><br><span class="line">    <span class="string">&quot;attr1&quot;</span>:<span class="string">&quot;val1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDeserializingUsingJsonAnySetter_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;name\&quot;:\&quot;My bean\&quot;,\&quot;attr2\&quot;:\&quot;val2\&quot;,\&quot;attr1\&quot;:\&quot;val1\&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="type">ExtendableBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().readerFor(ExtendableBean.class).readValue(json);</span><br><span class="line">    assertEquals(<span class="string">&quot;My bean&quot;</span>, bean.name);</span><br><span class="line">    assertEquals(<span class="string">&quot;val2&quot;</span>, bean.getProperties().get(<span class="string">&quot;attr2&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonSetter"><a href="#JsonSetter" class="headerlink" title="@JsonSetter"></a>@JsonSetter</h3><p>该注解是@JsonProperty的另一个作用, 和@JsonGetter相对, 标记一个方法是setter方法<br>如果目标实体类没有和Json字符串数据完全匹配的方法时, 我们可以通过这个注解做一些调整让他们匹配<br>下例中指定方法setTheName()作为name属性的setter方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonSetter(&quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTheName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDeserializingUsingJsonSetter_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;id\&quot;:1,\&quot;name\&quot;:\&quot;My bean\&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="type">MyBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().readerFor(MyBean.class).readValue(json);</span><br><span class="line">    assertEquals(<span class="string">&quot;My bean&quot;</span>, bean.getTheName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonDeserialize"><a href="#JsonDeserialize" class="headerlink" title="@JsonDeserialize"></a>@JsonDeserialize</h3><p>该注解标明使用自定义反序列化器(custom deserializer)<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Event</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonDeserialize(using = CustomDateDeserializer.class)</span></span><br><span class="line">    <span class="keyword">public</span> Date eventDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自定义反序列化器:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomDateDeserializer</span>  <span class="keyword">extends</span> <span class="title class_">StdDeserializer</span>&lt;Date&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SimpleDateFormat</span> <span class="variable">formatter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;dd-MM-yyyy hh:mm:ss&quot;</span>);</span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">CustomDateDeserializer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="literal">null</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomDateDeserializer</span><span class="params">(Class&lt;?&gt; vc)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(vc);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">deserialize</span><span class="params">(JsonParser jsonparser, DeserializationContext context)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">date</span> <span class="operator">=</span> jsonparser.getText();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> formatter.parse(date);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反序列过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDeserializingUsingJsonDeserialize_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;&quot;</span>name<span class="string">&quot;:&quot;</span>party<span class="string">&quot;,&quot;</span>eventDate<span class="string">&quot;:&quot;</span><span class="number">20</span>-<span class="number">12</span>-<span class="number">2014</span> <span class="number">02</span>:<span class="number">30</span>:<span class="number">00</span><span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;dd-MM-yyyy hh:mm:ss&quot;</span>);</span><br><span class="line">    <span class="type">Event</span> <span class="variable">event</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().readerFor(Event.class).readValue(json);</span><br><span class="line">    assertEquals(<span class="string">&quot;20-12-2014 02:30:00&quot;</span>, df.format(event.eventDate));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonAlias"><a href="#JsonAlias" class="headerlink" title="@JsonAlias"></a>@JsonAlias</h3><p>该注解在反序列化过程中为属性定义一个或多个别名<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliasBean</span> &#123;</span><br><span class="line">    <span class="meta">@JsonAlias(&#123; &quot;fName&quot;, &quot;f_name&quot; &#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Json字符串中fName, f_name或firstName的值都可以被反序列到属性firstName</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDeserializingUsingJsonAlias_thenCorrect</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;fName\&quot;: \&quot;John\&quot;, \&quot;lastName\&quot;: \&quot;Green\&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="type">AliasBean</span> <span class="variable">aliasBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().readerFor(AliasBean.class).readValue(json);</span><br><span class="line">    assertEquals(<span class="string">&quot;John&quot;</span>, aliasBean.getFirstName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="属性包含注解"><a href="#属性包含注解" class="headerlink" title="属性包含注解"></a>属性包含注解</h2><h3 id="JsonIgnoreProperties"><a href="#JsonIgnoreProperties" class="headerlink" title="@JsonIgnoreProperties"></a>@JsonIgnoreProperties</h3><p>该注解是一个类级别的注解, 标记一个或多个属性被Jackson忽略<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonIgnoreProperties(&#123; &quot;id&quot; &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanWithIgnore</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonIgnoreProperties_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException &#123;  </span><br><span class="line">    <span class="type">BeanWithIgnore</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanWithIgnore</span>(<span class="number">1</span>, <span class="string">&quot;My bean&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;My bean&quot;</span>));</span><br><span class="line">    assertThat(result, not(containsString(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参数ignoreUnknown为true时, Json字符串如果有未知的属性名, 则不会抛出异常</p>
<h3 id="JsonIgnore"><a href="#JsonIgnore" class="headerlink" title="@JsonIgnore"></a>@JsonIgnore</h3><p>该注解用于属性级别, 用于标明一个属性可以被Jackson忽略<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanWithIgnore</span> &#123;</span><br><span class="line">    <span class="meta">@JsonIgnore</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonIgnore_thenCorrect</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="type">BeanWithIgnore</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanWithIgnore</span>(<span class="number">1</span>, <span class="string">&quot;My bean&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>()</span><br><span class="line">      .writeValueAsString(bean);</span><br><span class="line">     </span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;My bean&quot;</span>));</span><br><span class="line">    assertThat(result, not(containsString(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonIgnoreType"><a href="#JsonIgnoreType" class="headerlink" title="@JsonIgnoreType"></a>@JsonIgnoreType</h3><p>该注解标记类型是注解作用的类型的属性都会被忽略<br>必须作用于类, 标明以该类为类型的属性都会被Jackson忽略<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> Name name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonIgnoreType</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> String firstName;</span><br><span class="line">        <span class="keyword">public</span> String lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonIgnoreType_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException, ParseException &#123;  </span><br><span class="line">    User.<span class="type">Name</span> <span class="variable">name</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>.Name(<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Doe&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, name);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(user);</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;1&quot;</span>));</span><br><span class="line">    assertThat(result, not(containsString(<span class="string">&quot;name&quot;</span>)));</span><br><span class="line">    assertThat(result, not(containsString(<span class="string">&quot;John&quot;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonInclude"><a href="#JsonInclude" class="headerlink" title="@JsonInclude"></a>@JsonInclude</h3><p>该注解在序列化时会排除属性值是空值（empty或null）、没有默认值的属性。<br>可作用在类和属性上<br>实体类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonInclude(Include.NON_NULL)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonInclude_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException &#123;  </span><br><span class="line">    <span class="type">MyBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBean</span>(<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;1&quot;</span>));</span><br><span class="line">    assertThat(result, not(containsString(<span class="string">&quot;name&quot;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonAutoDetect"><a href="#JsonAutoDetect" class="headerlink" title="@JsonAutoDetect"></a>@JsonAutoDetect</h3><p>该注解可以覆盖属性是否可见的默认语义, 比如对于不可见的private序列化时变成可见的<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonAutoDetect(fieldVisibility = Visibility.ANY)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrivateBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonAutoDetect_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">PrivateBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrivateBean</span>(<span class="number">1</span>, <span class="string">&quot;My bean&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;1&quot;</span>));</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;My bean&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h2><h3 id="JsonProperty"><a href="#JsonProperty" class="headerlink" title="@JsonProperty"></a>@JsonProperty</h3><p>该注解可以指定属性在Json字符串中的名字<br>下例中在非标准的setter和getter方法上使用该注解, 可以成功序列化和反序列化<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonProperty(&quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTheName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@JsonProperty(&quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTheName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化和反序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenUsingJsonProperty_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">MyBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBean</span>(<span class="number">1</span>, <span class="string">&quot;My bean&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(bean);</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;My bean&quot;</span>));</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;1&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="type">MyBean</span> <span class="variable">resultBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().readerFor(MyBean.class).readValue(result);</span><br><span class="line">    assertEquals(<span class="string">&quot;My bean&quot;</span>, resultBean.getTheName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonFormat"><a href="#JsonFormat" class="headerlink" title="@JsonFormat"></a>@JsonFormat</h3><p>该注解指定序列化日期和时间时的格式<br>修改前面1.7的实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Event</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Date eventDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonFormat_thenCorrect</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException, ParseException &#123;</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;dd-MM-yyyy hh:mm:ss&quot;</span>);</span><br><span class="line">    df.setTimeZone(TimeZone.getTimeZone(<span class="string">&quot;UTC&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">toParse</span> <span class="operator">=</span> <span class="string">&quot;20-12-2014 02:30:00&quot;</span>;</span><br><span class="line">    <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> df.parse(toParse);</span><br><span class="line">    <span class="type">Event</span> <span class="variable">event</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&quot;party&quot;</span>, date);     </span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(event);     </span><br><span class="line">    assertThat(result, containsString(toParse));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonUnwrapped"><a href="#JsonUnwrapped" class="headerlink" title="@JsonUnwrapped"></a>@JsonUnwrapped</h3><p>该注解指定值在序列化和反序列化时, 去除对应属性的外包装(根节点)<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnwrappedUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonUnwrapped</span></span><br><span class="line">    <span class="keyword">public</span> Name name;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> String firstName;</span><br><span class="line">        <span class="keyword">public</span> String lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonUnwrapped_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException, ParseException &#123;</span><br><span class="line">    UnwrappedUser.<span class="type">Name</span> <span class="variable">name</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UnwrappedUser</span>.Name(<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Doe&quot;</span>);</span><br><span class="line">    <span class="type">UnwrappedUser</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UnwrappedUser</span>(<span class="number">1</span>, name);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(user);</span><br><span class="line">    assertThat(result, containsString(<span class="string">&quot;John&quot;</span>));</span><br><span class="line">    assertThat(result, not(containsString(<span class="string">&quot;name&quot;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化结果:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;firstName&quot;</span>:<span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="string">&quot;lastName&quot;</span>:<span class="string">&quot;Doe&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonView"><a href="#JsonView" class="headerlink" title="@JsonView"></a>@JsonView</h3><p>该注解指明属性序列化和反序列时的视图级别(View)<br>视图类: 主要用于表明哪一级的实体类的属性会被序列化或反序列化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Views</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Public</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Internal</span> <span class="keyword">extends</span> <span class="title class_">Public</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserWithRoot</span> &#123;</span><br><span class="line">    <span class="meta">@JsonView(Views.Public.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="meta">@JsonView(Views.Public.class)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="meta">@JsonView(Views.Internal.class)</span></span><br><span class="line">    <span class="keyword">public</span> String school;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实例化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonView_thenCorrect</span><span class="params">()</span></span><br><span class="line">  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">UserWithRoot</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserWithRoot</span>();</span><br><span class="line">    user.id = <span class="number">1</span>;</span><br><span class="line">    user.name = <span class="string">&quot;bl&quot;</span>;</span><br><span class="line">    user.school = <span class="string">&quot;suide&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writerWithView(Views.Internal.class).writeValueAsString(user));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本例中, school的视图级别是View.Internal类, 而序列化的映射器设定的视图显示级别是Views.Public类, 比school的类型高了一级, 所以序列化结果中没有school,<br>{“id”:1,”name”:”bl”}<br>而如果修改映射器的视图级别是Views.Internal类, 则序列化结果中包含school<br>{“id”:1,”name”:”bl”,”school”:”suide”}</p>
<h3 id="JsonManagedReference-JsonBackReference"><a href="#JsonManagedReference-JsonBackReference" class="headerlink" title="@JsonManagedReference, @JsonBackReference"></a>@JsonManagedReference, @JsonBackReference</h3><p>这两个注解配合使用, 可以解决两个不同类的属性的父子关系(parent/child relationships)和循环引用(work around loops)<br>使用@JsonBackReference可以在序列化时阻断循环引用, 原理是忽略被注解的属性, 否则会导致异常<br>本例中, 我们用这组注解来序列化ItemWithRef实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ItemWithRef</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String itemName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonManagedReference</span></span><br><span class="line">    <span class="keyword">public</span> UserWithRef owner;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserWithRef</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonBackReference</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ItemWithRef&gt; userItems;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJacksonReferenceAnnotation_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">UserWithRef</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserWithRef</span>(<span class="number">1</span>, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">    <span class="type">ItemWithRef</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ItemWithRef</span>(<span class="number">2</span>, <span class="string">&quot;book&quot;</span>, user);</span><br><span class="line">    user.addItem(item);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化结果: {“id”:2,”itemName”:”book”,”owner”:{“id”:1,”name”:”John”}}<br>如果把注解对调并序列化user结果是: {“id”:1,”name”:”John”,”userItems”:[{“id”:2,”itemName”:”book”}]}</p>
<h3 id="JsonIdentityInfo"><a href="#JsonIdentityInfo" class="headerlink" title="@JsonIdentityInfo"></a>@JsonIdentityInfo</h3><p>该注解标明在序列化和反序列化一个值时, 该属性是否作为对象的唯一标识<br>该特性可以有效的解除循环引用, 和@JsonBackReference的区别是循环引用的对象的一个属性, 可以作为该对象的唯一标识被序列化, 而@JsonBackReference的循环引用对象不会二次序列化<br>两个实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonIdentityInfo(  generator = ObjectIdGenerators.PropertyGenerator.class,  property = &quot;id&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ItemWithIdentity</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String itemName;</span><br><span class="line">    <span class="keyword">public</span> UserWithIdentity owner;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserWithIdentity</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> List&lt;ItemWithIdentity&gt; userItems;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实例化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonIdentityInfo_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">UserWithIdentity</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserWithIdentity</span>(<span class="number">1</span>, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">    <span class="type">ItemWithIdentity</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ItemWithIdentity</span>(<span class="number">2</span>, <span class="string">&quot;book&quot;</span>, user);</span><br><span class="line">    user.addItem(item);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化结果:{“id”:2,”itemName”:”book”,”owner”:{“id”:1,”name”:”John”,”userItems”:[2]}}<br>这里循环引用对象是ItemWithIdentity, 当它作为UserWithIdentity的属性时, 指定它的id属性为其唯一标识序列化到UserWithIdentity当中</p>
<h3 id="JsonFilter"><a href="#JsonFilter" class="headerlink" title="@JsonFilter"></a>@JsonFilter</h3><p>该注解可以在序列化时指定一个过滤器<br>下面为一个实体类指定一个过滤器:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonFilter(&quot;myFilter&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanWithFilter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义过滤器并进行序列化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingJsonFilter_thenCorrect</span><span class="params">()</span>  <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">BeanWithFilter</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanWithFilter</span>(<span class="number">1</span>, <span class="string">&quot;My bean&quot;</span>);</span><br><span class="line">    <span class="type">FilterProvider</span> <span class="variable">filters</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleFilterProvider</span>().addFilter(<span class="string">&quot;myFilter&quot;</span>,</span><br><span class="line">           SimpleBeanPropertyFilter.filterOutAllExcept(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writer(filters).writeValueAsString(bean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化结果:{“name”:”My bean”}<br>这里添加了一个SimpleBeanPropertyFilter.filterOutAllExcept过滤器, 该过滤器的含义是除name属性外, 其他属性都被过滤掉(不序列化)</p>
<h2 id="其他注解"><a href="#其他注解" class="headerlink" title="其他注解"></a>其他注解</h2><h3 id="JsonAppend"><a href="#JsonAppend" class="headerlink" title="@JsonAppend"></a>@JsonAppend</h3><p>该注解用来给一个被序列化的对象添加一个虚拟属性. 这个功能非常有用, 尤其是当我们想直接在Json字符串中添加额外的信息时, 不再需要修改类的定义. 举例来说, 它可以很方便的在Json文档中插入bean的版本信息, 而不需要bean提供对应的属性.<br>使用@JsonAppend注解的实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonAppend(attrs = &#123;@JsonAppend.Attr(value = &quot;version&quot;)&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanWithAppend</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// constructor, getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">BeanWithAppend</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanWithAppend</span>(<span class="number">2</span>, <span class="string">&quot;Bean With Append Annotation&quot;</span>);</span><br><span class="line"><span class="type">ObjectWriter</span> <span class="variable">writer</span> <span class="operator">=</span> mapper.writerFor(BeanWithAppend.class).withAttribute(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;1.0&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> writer.writeValueAsString(bean);</span><br></pre></td></tr></table></figure>
<p>序列化结果: { “id”: 2, “name”: “Bean With Append Annotation”, “version”: “1.0” }</p>
<h3 id="JsonNaming"><a href="#JsonNaming" class="headerlink" title="@JsonNaming"></a>@JsonNaming</h3><p>该注解用来在序列化时选择一个属性命名习惯来代替默认属性名. 注解参数value用来指定已有命名习惯, 或用户定义的命名习惯<br>除默认值(value=LOWER_CAMEL_CASE, 即驼峰命名法)外, Jackson库同时提供了4种内置的属性命名习惯:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">KEBAB_CASE: 属性名单词用短线分隔连接, 比如hello-world</span><br><span class="line">LOWER_CASE: 属性名用小写字母而且没有分隔符, 比如helloworld</span><br><span class="line">SNAKE_CASE: 属性名用小写字母而且用下划线做分隔符, 比如hello_world</span><br><span class="line">UPPER_CAMEL_CASE: 属性名所有单词用大写开头而且没有分隔符, 比如HelloWorld</span><br></pre></td></tr></table></figure>
<p>下例中用SNAKE_CASE命名法, 将属性beanName名序列化为bean_name</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NamingBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String beanName;</span><br><span class="line">    <span class="comment">// constructor, getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">NamingBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NamingBean</span>(<span class="number">3</span>, <span class="string">&quot;Naming Bean&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> mapper.writeValueAsString(bean);</span><br></pre></td></tr></table></figure>
<p>序列化结果: { “id”: 3, “bean_name”: “Naming Bean” }</p>
<h3 id="JsonPropertyDescription"><a href="#JsonPropertyDescription" class="headerlink" title="@JsonPropertyDescription"></a>@JsonPropertyDescription</h3><p>Jackson的独立模块JSON Schema提供了创建Json信息表(Json schemas)来描述Java的类型信息. 信息表可用于输出我们期望的序列化Java对象, 或者在反序列化前验证Json文档(document)<br>注解@JsonPropertyDescription允许把人类可读的描述信息, 附加在要创建的Json信息表的description属性<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertyDescriptionBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="meta">@JsonPropertyDescription(&quot;This is a description of the name property&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程: 这里生成Json信息表的同时为它附加了description属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">SchemaFactoryWrapper</span> <span class="variable">wrapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchemaFactoryWrapper</span>();</span><br><span class="line">mapper.acceptJsonFormatVisitor(PropertyDescriptionBean.class, wrapper);</span><br><span class="line"><span class="type">JsonSchema</span> <span class="variable">jsonSchema</span> <span class="operator">=</span> wrapper.finalSchema();</span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> mapper.writeValueAsString(jsonSchema);</span><br></pre></td></tr></table></figure>
<p>序列化结果:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;urn:jsonschema:com:baeldung:jackson:annotation:extra:PropertyDescriptionBean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;properties&quot;</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>:</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;This is a description of the name property&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;id&quot;</span>: </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JsonPOJOBuilder"><a href="#JsonPOJOBuilder" class="headerlink" title="@JsonPOJOBuilder"></a>@JsonPOJOBuilder</h3><p>该注解用来配置一个builder类用于定制反序列化过程, 尤其是当Json文档中属性命名习惯和POJO类对象的属性不同<br>准备反序列化的Json字符串: { “id”: 5, “name”: “POJO Builder Bean”}<br>反序列化的目标类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonDeserialize(builder = BeanBuilder.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">POJOBuilderBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> identity;</span><br><span class="line">    <span class="keyword">private</span> String beanName;</span><br><span class="line">    <span class="comment">// constructor, getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意:BeanBuilder是自定义bulider类, 参见下文.<br>可以看到, bean属性的名称和Json字符串中对应属性的名称不同. 这就是@JsonPOJOBuilder发挥作用的地方.<br>@JsonPOJOBuilder有两个参数:</p>
<p>buildMethodName: 一个无参方法, 用来在绑定Json属性和bean属性后, 创建bean的实例<br>withPrefix: 方法名前缀, 有该前缀的方法是用来匹配Json属性和bean的属性. 默认前缀是with<br>下面是BeanBuilder类定义:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonPOJOBuilder(buildMethodName = &quot;createBean&quot;, withPrefix = &quot;construct&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanBuilder</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> idValue;</span><br><span class="line">    <span class="keyword">private</span> String nameValue;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BeanBuilder <span class="title function_">constructId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        idValue = id;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> BeanBuilder <span class="title function_">constructName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        nameValue = name;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> POJOBuilderBean <span class="title function_">createBean</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">POJOBuilderBean</span>(idValue, nameValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码中, 我们配置了注解@JsonPOJOBuilder的参数, 用createBean方法作为build方法, 用construct前缀来匹配属性名<br>反序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;id\&quot;:5,\&quot;name\&quot;:\&quot;POJO Builder Bean\&quot;&#125;&quot;</span>;</span><br><span class="line"><span class="type">POJOBuilderBean</span> <span class="variable">bean</span> <span class="operator">=</span> mapper.readValue(jsonString, POJOBuilderBean.class);</span><br></pre></td></tr></table></figure>
<h3 id="JsonTypeId"><a href="#JsonTypeId" class="headerlink" title="@JsonTypeId"></a>@JsonTypeId</h3><p>该注解作用于属性, 使得该属性不再是普通属性, 其值代表bean类的类型ID(`TypeId), 可以用它来描述多态时实体类对象的实际类型<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TypeIdBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="meta">@JsonTypeId</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// constructor, getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mapper.enableDefaultTyping(DefaultTyping.NON_FINAL);</span><br><span class="line"><span class="type">TypeIdBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TypeIdBean</span>(<span class="number">6</span>, <span class="string">&quot;Type Id Bean&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> mapper.writeValueAsString(bean);</span><br></pre></td></tr></table></figure>
<p>序列化结果:[“Type Id Bean”,{“id”:6}]</p>
<p>mapper.enableDefaultTyping(DefaultTyping.NON_FINAL)的作用是在序列化结果中显示实体类类型属性<br>结果是一个Json对象, 其中”Type Id Bean”是实体类ID的描述, {“id”:6}是类的属性值</p>
<h2 id="禁用Jackson注解"><a href="#禁用Jackson注解" class="headerlink" title="禁用Jackson注解"></a>禁用Jackson注解</h2><p>通过设置MapperFeature.USE_ANNOTATIONS可以禁用实体类上的Jackson注解<br>实体类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonInclude(Include.NON_NULL)</span></span><br><span class="line"><span class="meta">@JsonPropertyOrder(&#123; &quot;name&quot;, &quot;id&quot; &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenDisablingAllAnnotations_thenAllDisabled</span><span class="params">()</span>  <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">MyBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBean</span>(<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">    mapper.disable(MapperFeature.USE_ANNOTATIONS);</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> mapper.writeValueAsString(bean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>序列化结果:{ “id”:1, “name”:null}<br>如果注释掉mapper.disable(MapperFeature.USE_ANNOTATIONS);, 则序列化结果是: {“id”:1}</p>
<h2 id="注解混合"><a href="#注解混合" class="headerlink" title="注解混合"></a>注解混合</h2><p>多个实体类的注解可以混合在一起使用<br>下例中把类MyMixInForIgnoreType的注解@@JsonIgnoreType作用到了类Item的属性User:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String itemName;</span><br><span class="line">    <span class="keyword">public</span> User owner;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonIgnoreType</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMixInForIgnoreType</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>序列化过程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whenSerializingUsingMixInAnnotation_thenCorrect</span><span class="params">()</span>   <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">Item</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">1</span>, <span class="string">&quot;book&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(item);</span><br><span class="line">    <span class="comment">//结果: &#123;&quot;id&quot;:1,&quot;itemName&quot;:&quot;book&quot;,&quot;owner&quot;:null&#125;</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">    mapper.addMixIn(User.class, MyMixInForIgnoreType.class);</span><br><span class="line"> </span><br><span class="line">    result = mapper.writeValueAsString(item);</span><br><span class="line">    <span class="comment">//结果: &#123;&quot;id&quot;:1,&quot;itemName&quot;:&quot;book&quot;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%B3%A8%E8%A7%A3/" rel="tag"># 注解</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/01/22/Knife4j%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" rel="prev" title="Knife4j快速入门">
      <i class="fa fa-chevron-left"></i> Knife4j快速入门
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/01/23/%E5%B0%9A%E7%A1%85%E8%B0%B7%E5%B0%9A%E5%BA%AD%E5%85%AC%E5%AF%93-02/" rel="next" title="尚硅谷尚庭公寓-02">
      尚硅谷尚庭公寓-02 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.</span> <span class="nav-text">Spring 注解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%92%8C-DI-%E7%9B%B8%E5%85%B3%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.1.</span> <span class="nav-text">和 DI 相关的注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Autowired"><span class="nav-number">1.1.1.</span> <span class="nav-text">@Autowired</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bean"><span class="nav-number">1.1.2.</span> <span class="nav-text">@Bean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Qualifier"><span class="nav-number">1.1.3.</span> <span class="nav-text">@Qualifier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Required"><span class="nav-number">1.1.4.</span> <span class="nav-text">@Required</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Value"><span class="nav-number">1.1.5.</span> <span class="nav-text">@Value</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DependsOn"><span class="nav-number">1.1.6.</span> <span class="nav-text">@DependsOn</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lazy"><span class="nav-number">1.1.7.</span> <span class="nav-text">@Lazy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lookup"><span class="nav-number">1.1.8.</span> <span class="nav-text">@Lookup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Primary"><span class="nav-number">1.1.9.</span> <span class="nav-text">@Primary</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scope"><span class="nav-number">1.1.10.</span> <span class="nav-text">@Scope</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Context-%E9%85%8D%E7%BD%AE%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.2.</span> <span class="nav-text">Context 配置注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Profile"><span class="nav-number">1.2.1.</span> <span class="nav-text">@Profile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Import"><span class="nav-number">1.2.2.</span> <span class="nav-text">@Import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ImportResource"><span class="nav-number">1.2.3.</span> <span class="nav-text">@ImportResource</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PropertySource"><span class="nav-number">1.2.4.</span> <span class="nav-text">@PropertySource</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PropertySources"><span class="nav-number">1.2.5.</span> <span class="nav-text">@PropertySources</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-MVC-%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.</span> <span class="nav-text">Spring MVC 注解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Controller"><span class="nav-number">2.1.</span> <span class="nav-text">@Controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RestController"><span class="nav-number">2.2.</span> <span class="nav-text">@RestController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestMapping"><span class="nav-number">2.3.</span> <span class="nav-text">@RequestMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GetMapping"><span class="nav-number">2.4.</span> <span class="nav-text">@GetMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PostMapping"><span class="nav-number">2.5.</span> <span class="nav-text">@PostMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PutMapping"><span class="nav-number">2.6.</span> <span class="nav-text">@PutMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DeleteMapping"><span class="nav-number">2.7.</span> <span class="nav-text">@DeleteMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PatchMapping"><span class="nav-number">2.8.</span> <span class="nav-text">@PatchMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestParam"><span class="nav-number">2.9.</span> <span class="nav-text">@RequestParam</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PathVariable"><span class="nav-number">2.10.</span> <span class="nav-text">@PathVariable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestBody"><span class="nav-number">2.11.</span> <span class="nav-text">@RequestBody</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestHeader"><span class="nav-number">2.12.</span> <span class="nav-text">@RequestHeader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CookieValue"><span class="nav-number">2.13.</span> <span class="nav-text">@CookieValue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ModelAttribute"><span class="nav-number">2.14.</span> <span class="nav-text">@ModelAttribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SessionAttribute"><span class="nav-number">2.15.</span> <span class="nav-text">@SessionAttribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestAttribute"><span class="nav-number">2.16.</span> <span class="nav-text">@RequestAttribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ResponseStatus"><span class="nav-number">2.17.</span> <span class="nav-text">@ResponseStatus</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ExceptionHandler"><span class="nav-number">2.18.</span> <span class="nav-text">@ExceptionHandler</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CrossOrigin"><span class="nav-number">2.19.</span> <span class="nav-text">@CrossOrigin</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MatrixVariable"><span class="nav-number">2.20.</span> <span class="nav-text">@MatrixVariable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#InitBinder"><span class="nav-number">2.21.</span> <span class="nav-text">@InitBinder</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ResponseStatus-1"><span class="nav-number">2.22.</span> <span class="nav-text">@ResponseStatus</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Validated"><span class="nav-number">2.23.</span> <span class="nav-text">@Validated</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Validated-Annotation-with-Groups"><span class="nav-number">2.24.</span> <span class="nav-text">@Validated Annotation with Groups</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestBodyAdvice"><span class="nav-number">2.25.</span> <span class="nav-text">@RequestBodyAdvice</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ControllerAdvice"><span class="nav-number">2.26.</span> <span class="nav-text">@ControllerAdvice</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MatrixParam"><span class="nav-number">2.27.</span> <span class="nav-text">@MatrixParam</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SessionAttributes"><span class="nav-number">2.28.</span> <span class="nav-text">@SessionAttributes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestAttribute-1"><span class="nav-number">2.29.</span> <span class="nav-text">@RequestAttribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ModelAttribute-1"><span class="nav-number">2.30.</span> <span class="nav-text">@ModelAttribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CookieValue-1"><span class="nav-number">2.31.</span> <span class="nav-text">@CookieValue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestBody-1"><span class="nav-number">2.32.</span> <span class="nav-text">@RequestBody</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ResponseBody"><span class="nav-number">2.33.</span> <span class="nav-text">@ResponseBody</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ResponseStatus-2"><span class="nav-number">2.34.</span> <span class="nav-text">@ResponseStatus</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ExceptionHandler-1"><span class="nav-number">2.35.</span> <span class="nav-text">@ExceptionHandler</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ControllerAdvice-1"><span class="nav-number">2.36.</span> <span class="nav-text">@ControllerAdvice</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PostMapping-with-consumes-Attribute"><span class="nav-number">2.37.</span> <span class="nav-text">@PostMapping with consumes Attribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GetMapping-with-produces-Attribute"><span class="nav-number">2.38.</span> <span class="nav-text">@GetMapping with produces Attribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ExceptionHandler-with-responseBody-Attribute"><span class="nav-number">2.39.</span> <span class="nav-text">@ExceptionHandler with responseBody Attribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ControllerAdvice-with-basePackages"><span class="nav-number">2.40.</span> <span class="nav-text">@ControllerAdvice with basePackages</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SessionAttribute-with-name"><span class="nav-number">2.41.</span> <span class="nav-text">@SessionAttribute with name</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestHeader-1"><span class="nav-number">2.42.</span> <span class="nav-text">@RequestHeader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Component"><span class="nav-number">2.43.</span> <span class="nav-text">@Component</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Service"><span class="nav-number">2.44.</span> <span class="nav-text">@Service</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Repository"><span class="nav-number">2.45.</span> <span class="nav-text">@Repository</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Profile-1"><span class="nav-number">2.46.</span> <span class="nav-text">@Profile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestPart"><span class="nav-number">2.47.</span> <span class="nav-text">@RequestPart</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-Boot-%E6%B3%A8%E8%A7%A3"><span class="nav-number">3.</span> <span class="nav-text">Spring Boot 注解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ConfigurationProperties"><span class="nav-number">3.1.</span> <span class="nav-text">@ConfigurationProperties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EnableConfigurationProperties"><span class="nav-number">3.2.</span> <span class="nav-text">@EnableConfigurationProperties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ConditionalOnProperty"><span class="nav-number">3.3.</span> <span class="nav-text">@ConditionalOnProperty</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-Cloud-%E6%B3%A8%E8%A7%A3"><span class="nav-number">4.</span> <span class="nav-text">Spring Cloud 注解</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Jackson"><span class="nav-number">5.</span> <span class="nav-text">Jackson</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.1.</span> <span class="nav-text">序列化注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonAnyGetter"><span class="nav-number">5.1.1.</span> <span class="nav-text">@JsonAnyGetter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonGetter"><span class="nav-number">5.1.2.</span> <span class="nav-text">@JsonGetter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonPropertyOrder"><span class="nav-number">5.1.3.</span> <span class="nav-text">@JsonPropertyOrder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonRawValue"><span class="nav-number">5.1.4.</span> <span class="nav-text">@JsonRawValue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonValue"><span class="nav-number">5.1.5.</span> <span class="nav-text">@JsonValue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonRootName"><span class="nav-number">5.1.6.</span> <span class="nav-text">@JsonRootName</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonSerialize"><span class="nav-number">5.1.7.</span> <span class="nav-text">@JsonSerialize</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.2.</span> <span class="nav-text">反序列化注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonCreator"><span class="nav-number">5.2.1.</span> <span class="nav-text">@JsonCreator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JacksonInject"><span class="nav-number">5.2.2.</span> <span class="nav-text">@JacksonInject</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonAnySetter"><span class="nav-number">5.2.3.</span> <span class="nav-text">@JsonAnySetter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonSetter"><span class="nav-number">5.2.4.</span> <span class="nav-text">@JsonSetter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonDeserialize"><span class="nav-number">5.2.5.</span> <span class="nav-text">@JsonDeserialize</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonAlias"><span class="nav-number">5.2.6.</span> <span class="nav-text">@JsonAlias</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E5%8C%85%E5%90%AB%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.3.</span> <span class="nav-text">属性包含注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonIgnoreProperties"><span class="nav-number">5.3.1.</span> <span class="nav-text">@JsonIgnoreProperties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonIgnore"><span class="nav-number">5.3.2.</span> <span class="nav-text">@JsonIgnore</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonIgnoreType"><span class="nav-number">5.3.3.</span> <span class="nav-text">@JsonIgnoreType</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonInclude"><span class="nav-number">5.3.4.</span> <span class="nav-text">@JsonInclude</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonAutoDetect"><span class="nav-number">5.3.5.</span> <span class="nav-text">@JsonAutoDetect</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.4.</span> <span class="nav-text">常用注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonProperty"><span class="nav-number">5.4.1.</span> <span class="nav-text">@JsonProperty</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonFormat"><span class="nav-number">5.4.2.</span> <span class="nav-text">@JsonFormat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonUnwrapped"><span class="nav-number">5.4.3.</span> <span class="nav-text">@JsonUnwrapped</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonView"><span class="nav-number">5.4.4.</span> <span class="nav-text">@JsonView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonManagedReference-JsonBackReference"><span class="nav-number">5.4.5.</span> <span class="nav-text">@JsonManagedReference, @JsonBackReference</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonIdentityInfo"><span class="nav-number">5.4.6.</span> <span class="nav-text">@JsonIdentityInfo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonFilter"><span class="nav-number">5.4.7.</span> <span class="nav-text">@JsonFilter</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.5.</span> <span class="nav-text">其他注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonAppend"><span class="nav-number">5.5.1.</span> <span class="nav-text">@JsonAppend</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonNaming"><span class="nav-number">5.5.2.</span> <span class="nav-text">@JsonNaming</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonPropertyDescription"><span class="nav-number">5.5.3.</span> <span class="nav-text">@JsonPropertyDescription</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonPOJOBuilder"><span class="nav-number">5.5.4.</span> <span class="nav-text">@JsonPOJOBuilder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JsonTypeId"><span class="nav-number">5.5.5.</span> <span class="nav-text">@JsonTypeId</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A6%81%E7%94%A8Jackson%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.6.</span> <span class="nav-text">禁用Jackson注解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E6%B7%B7%E5%90%88"><span class="nav-number">5.7.</span> <span class="nav-text">注解混合</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zongqing Li"
      src="https://github.com/hqulzq/hqulzq.github.io/blob/main/images/userimg.jpg?raw=true">
  <p class="site-author-name" itemprop="name">Zongqing Li</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">104</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hqulzq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hqulzq" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hqulzq@163.com" title="E-Mail → mailto:hqulzq@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

      
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2019/" rel="tag">2019</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2020/" rel="tag">2020</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2021/" rel="tag">2021</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2022/" rel="tag">2022</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2023/" rel="tag">2023</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2024/" rel="tag">2024</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2025/" rel="tag">2025</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bug%E6%80%BB%E7%BB%93/" rel="tag">Bug总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CVPR/" rel="tag">CVPR</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CVPR-Workshop/" rel="tag">CVPR Workshop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICCV/" rel="tag">ICCV</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICLR/" rel="tag">ICLR</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICML/" rel="tag">ICML</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IJCAI/" rel="tag">IJCAI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Knife4j/" rel="tag">Knife4j</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MinIO/" rel="tag">MinIO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis-Plus/" rel="tag">Mybatis-Plus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NeurIPS/" rel="tag">NeurIPS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ODE%E6%B1%82%E8%A7%A3/" rel="tag">ODE求解</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RocketMQ/" rel="tag">RocketMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/diffusion/" rel="tag">diffusion</a><span class="tag-list-count">65</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/latex/" rel="tag">latex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95/" rel="tag">代码随想录</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%B4%E5%87%BD%E6%95%B0/" rel="tag">头函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%9A%E5%BA%AD%E5%85%AC%E5%AF%93/" rel="tag">尚庭公寓</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" rel="tag">异常处理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" rel="tag">快速入门</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/" rel="tag">技术总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E7%BB%84/" rel="tag">数组</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E8%A7%A3/" rel="tag">注解</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%AB%99/" rel="tag">网站</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%A5%E4%BE%9D/" rel="tag">若依</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E6%96%87/" rel="tag">论文</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%BE%E8%A1%A8i/" rel="tag">链表i</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" rel="tag">项目实战</a><span class="tag-list-count">6</span></li></ul>
        </canvas>
    </div>
</div>



    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zongqing Li</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #4D4D4C;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #F7F7F7;
      background-image: linear-gradient(#F7F7F7, #F7F7F7);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>

  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('post.copy_button').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('post.copy_success')
          else $(this).text('post.copy_failure')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('post.copy_button')
        }, 300)
      }).append(e)
    })
  </script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
